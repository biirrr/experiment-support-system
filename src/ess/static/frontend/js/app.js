(function(e){function t(t){for(var s,i,o=t[0],u=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);c&&c(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},a={app:0},n=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frontend",attrs:{id:"app"}},[e.$store.state.ui.loaded?[e.currentPage?r("page-renderer",{attrs:{page:e.currentPage}}):e.$store.state.progress.completed?r("study-completed"):e._e(),e.$store.state.ui.busy?r("div",{staticClass:"busy-overlay"}):e._e(),"development"===e.$store.state.experiment.attributes.status?r("div",{staticClass:"reset-experiment"},[r("button",{staticClass:"button alert",on:{click:e.resetExperiment}},[r("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M2 12C2 17 6 21 11 21C13.4 21 15.7 20.1 17.4 18.4L15.9 16.9C14.6 18.3 12.9 19 11 19C4.8 19 1.6 11.5 6.1 7.1S18 5.8 18 12H15L19 16H19.1L23 12H20C20 7 16 3 11 3S2 7 2 12M10 15H12V17H10V15M10 7H12V13H10V7"}})])])]):e._e()]:r("div",{staticClass:"busy-overlay"},[r("div",{staticClass:"loading"},[r("svg",{attrs:{viewBox:"0 0 200 200"}},[r("circle",{attrs:{cx:"100",cy:"100",r:"80",fill:"none","stroke-width":"12"}}),r("circle",{attrs:{cx:"100",cy:"100",r:"80",fill:"none","stroke-width":"12","stroke-dasharray":"502.654","stroke-dashoffset":502.654*(1-e.progress)}})]),r("span",[e._v("Loading...")])])])],2)},n=[],i=r("d4ec"),o=r("bee2"),u=r("262e"),l=r("2caf"),c=r("9ab4"),p=r("60a3"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"grid-container"},[r("div",{staticClass:"grid-x grid-padding-x"},[e.questions&&e.responses?r("form",{staticClass:"cell",on:{submit:e.submitForm}},[r("h1",[e._v(e._s(e.page.attributes.title))]),e._l(e.questions,(function(t){return r("question-renderer",{key:t.id,attrs:{question:t,error:e.errors[t.id]},model:{value:e.responses[t.id],callback:function(r){e.$set(e.responses,t.id,r)},expression:"responses[question.id]"}})})),r("div",{staticClass:"buttons"},[r("ul",{staticClass:"menu"},[r("li",[r("button",{staticClass:"button"},[e._v(e._s(e.nextButtonLabel))])])])])],2):e._e()])])},v=[],m=(r("4de4"),r("4160"),r("d81d"),r("4fad"),r("ac1f"),r("1276"),r("159b"),r("3835")),h=(r("96cf"),r("1da1")),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.questionType?r("section",{class:"question question-type-"+e.questionType.attributes["_name"]+(e.error?" has-error":""),attrs:{id:"question-"+e.question.id}},[e.attributes.title?r("h2",{class:e.attributes.required?"required":""},[e.error?r("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(e.attributes.title)+" ")]):e._e(),"USEFDisplay"===e.renderType?r("div",{domProps:{innerHTML:e._s(e.attributes.content)}}):"USEFSingleLineInput"===e.renderType?r("div",[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"text"},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiLineInput"===e.renderType?r("div",[r("label",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFSingleChoice"===e.renderType?r("div",["vertical list"===e.attributes.display?r("ul",{staticClass:"no-bullet"},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("li",{key:s},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"radio"},domProps:{value:s,checked:e._q(e.localValue,s)},on:{change:function(t){e.localValue=s}}}),e._v(" "+e._s(a)+" ")])])})),0):"horizontal list"===e.attributes.display?r("table",{staticClass:"no-bullet"},[r("thead",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])})),0)]),r("tbody",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("td",{key:s,attrs:{scope:"col"}},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(a))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"radio"},domProps:{value:s,checked:e._q(e.localValue,s)},on:{change:function(t){e.localValue=s}}})])])})),0)])]):r("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?r:r[0]}}},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("option",{key:s,domProps:{value:s}},[e._v(e._s(a))])})),0),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiChoice"===e.renderType?r("div",["vertical list"===e.attributes.display?r("ul",{staticClass:"no-bullet"},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("li",{key:s},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.localValue)?e._i(e.localValue,s)>-1:e.localValue},on:{change:function(t){var r=e.localValue,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=s,o=e._i(r,i);a.checked?o<0&&(e.localValue=r.concat([i])):o>-1&&(e.localValue=r.slice(0,o).concat(r.slice(o+1)))}else e.localValue=n}}}),e._v(" "+e._s(a)+" ")])])})),0):"horizontal list"===e.attributes.display?r("table",{staticClass:"no-bullet"},[r("thead",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])})),0)]),r("tbody",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("td",{key:s,attrs:{scope:"col"}},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(a))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.localValue)?e._i(e.localValue,s)>-1:e.localValue},on:{change:function(t){var r=e.localValue,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=s,o=e._i(r,i);a.checked?o<0&&(e.localValue=r.concat([i])):o>-1&&(e.localValue=r.slice(0,o).concat(r.slice(o+1)))}else e.localValue=n}}})])])})),0)])]):r("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,multiple:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?r:r[0]}}},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("option",{key:s,domProps:{value:s}},[e._v(e._s(a))])})),0),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFHidden"===e.renderType?r("div",[r("input",{attrs:{name:"question-"+e.question.id,type:"hidden"},domProps:{value:e.attributes.value}})]):"USEFSingleChoiceGrid"===e.renderType?r("div",[r("table",[r("thead",[r("th"),e._l(e.zip(e.attributes.column_values,e.attributes.column_labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])}))],2),r("tbody",e._l(e.zip(e.attributes.row_values,e.attributes.row_labels),(function(t){var s=t[0],a=t[1];return r("tr",{key:s,class:e.error&&e.error[s]?"has-error":""},[r("th",{attrs:{scope:"row"}},[e.error&&e.error[s]?r("svg",{staticClass:"mdi icon small alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(a)+" ")]),e._l(e.zip(e.attributes.column_values,e.attributes.column_labels),(function(t){var a=t[0],n=t[1];return r("td",{key:a},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(n))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value[s],expression:"value[row]"}],attrs:{name:"question-"+e.question.id+"."+s,type:"radio"},domProps:{value:a,checked:e._q(e.value[s],a)},on:{change:function(t){return e.$set(e.value,s,a)}}})])])}))],2)})),0)]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiChoiceGrid"===e.renderType?r("div",[r("table",[r("thead",[r("th"),e._l(e.zip(e.attributes.column_values,e.attributes.column_labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])}))],2),r("tbody",e._l(e.zip(e.attributes.row_values,e.attributes.row_labels),(function(t){var s=t[0],a=t[1];return r("tr",{key:s,class:e.error&&e.error[s]?"has-error":""},[r("th",{attrs:{scope:"row"}},[e.error&&e.error[s]?r("svg",{staticClass:"mdi icon small alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(a)+" ")]),e._l(e.zip(e.attributes.column_values,e.attributes.column_labels),(function(t){var a=t[0],n=t[1];return r("td",{key:a},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(n))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value[s],expression:"value[row]"}],attrs:{name:"question-"+e.question.id+"."+s,type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.value[s])?e._i(e.value[s],a)>-1:e.value[s]},on:{change:function(t){var r=e.value[s],n=t.target,i=!!n.checked;if(Array.isArray(r)){var o=a,u=e._i(r,o);n.checked?u<0&&e.$set(e.value,s,r.concat([o])):u>-1&&e.$set(e.value,s,r.slice(0,u).concat(r.slice(u+1)))}else e.$set(e.value,s,i)}}})])])}))],2)})),0)]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFInvalid"===e.renderType?r("p",[e._v("This question has an invalid question type and cannot be displayed.")]):e._e()]):e._e()},b=[],g=(r("c975"),r("4979")),y=r.n(g),x=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.localValue=null,e}return Object(o["a"])(r,[{key:"mounted",value:function(){this.localValue=y()(this.$props.value)}},{key:"valueChange",value:function(){this.$emit("input",this.localValue)}},{key:"label",value:function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}},{key:"zip",value:function(e,t){return e.map((function(e,r){return r<t.length?[e,t[r]]:[e,e]}))}},{key:"questionType",get:function(){return this.$store.state.questionTypes[this.$props.question.relationships["question-type"].data.id]}},{key:"attributes",get:function(){var e=this,t={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(r){e.$props.question.attributes[r[0]]?t[r[0]]=e.$props.question.attributes[r[0]]:r[1]&&"user"===r[1].source?"booleanValue"===r[1].type?t[r[0]]=!1:"listOfValues"===r[1].type?t[r[0]]=[]:r[1].allowed&&r[1].allowed.length>0?t[r[0]]=r[1].allowed[0]:t[r[0]]="":t[r[0]]=null})),t}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes._name.indexOf("USEF")?this.questionType.attributes._name:"USEFInvalid"}}]),r}(p["c"]);Object(c["a"])([Object(p["b"])()],x.prototype,"question",void 0),Object(c["a"])([Object(p["b"])()],x.prototype,"value",void 0),Object(c["a"])([Object(p["b"])()],x.prototype,"error",void 0),Object(c["a"])([Object(p["d"])("localValue")],x.prototype,"valueChange",null),x=Object(c["a"])([p["a"]],x);var _=x,w=_,k=r("2877"),C=Object(k["a"])(w,f,b,!1,null,null,null),q=C.exports,O=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.responses=null,e.errors={},e}return Object(o["a"])(r,[{key:"mounted",value:function(){this.responses=this.createResponseSet(),this.errors={}}},{key:"updatePage",value:function(){this.responses=this.createResponseSet(),this.errors={}}},{key:"submitForm",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.responses){e.next=22;break}if(e.prev=2,!this.isLastPage){e.next=10;break}return e.next=6,this.$store.dispatch("validateSubmission",{page:this.page.id,responses:this.validatableResponses(this.responses)});case 6:return e.next=8,this.$store.dispatch("submitResponses");case 8:e.next=15;break;case 10:return this.errors={},e.next=13,this.$store.dispatch("validateSubmission",{page:this.page.id,responses:this.validatableResponses(this.responses)});case 13:r=this.$store.state.transitions[this.page.relationships.next.data[0].id],r&&(s=this.$store.state.pages[r.relationships.target.data.id],s&&this.$store.commit("setCurrentPage",s));case 15:e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](2),a={},e.t0.forEach((function(e){if(e.source&&e.source.pointer)for(var t=e.source.pointer.substring(1).split("/"),r=a,s=0;s<t.length;s++)s===t.length-1?r[t[s]]=e.title:(r[t[s]]||(r[t[s]]={}),r=r[t[s]])})),this.errors=a;case 22:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createResponseSet",value:function(){var e=this,t={};return this.questions.forEach((function(r){var s=e.$store.state.questionTypes[r.relationships["question-type"].data.id];if(s){var a=void 0;e.$store.state.progress.responses[e.page.id]&&e.$store.state.progress.responses[e.page.id][r.id]&&(a=e.$store.state.progress.responses[e.page.id][r.id]),"USEFDisplay"===s.attributes._core_type?t[r.id]=void 0:"USEFSingleLineInput"===s.attributes._core_type||"USEFMultiLineInput"===s.attributes._core_type||"USEFSingleChoice"===s.attributes._core_type?t[r.id]=void 0==a?null:a:"USEFMultiChoice"===s.attributes._core_type?t[r.id]=void 0==a?[]:a:"USEFHidden"===s.attributes._core_type?t[r.id]=r.attributes.value:"USEFSingleChoiceGrid"===s.attributes._core_type?(t[r.id]={},r.attributes.row_values.forEach((function(e){a&&void 0!==a[e]?t[r.id][e]=a[e]:t[r.id][e]=null}))):"USEFMultiChoiceGrid"===s.attributes._core_type&&(t[r.id]={},r.attributes.row_values.forEach((function(e){a&&void 0!==a[e]?t[r.id][e]=a[e]:t[r.id][e]=[]})))}})),t}},{key:"validatableResponses",value:function(e){var t={};return Object.entries(e).forEach((function(e){var r=Object(m["a"])(e,2),s=r[0],a=r[1];void 0!==a&&(t[s]=a)})),t}},{key:"questions",get:function(){var e=this;return this.page?this.page.relationships.questions.data.map((function(t){return e.$store.state.questions[t.id]})).filter((function(e){return e})):[]}},{key:"isFirstPage",get:function(){return this.$store.state.experiment&&this.$store.state.experiment.relationships["first-page"]&&this.page.id===this.$store.state.experiment.relationships["first-page"].data.id}},{key:"isLastPage",get:function(){return 0===this.page.relationships.next.data.length}},{key:"nextButtonLabel",get:function(){return this.$store.state.ui.busy?this.isLastPage?"Saving...":"Validating...":this.isFirstPage?"Start":this.isLastPage?"Finish":"Next page"}}]),r}(p["c"]);Object(c["a"])([Object(p["b"])()],O.prototype,"page",void 0),Object(c["a"])([Object(p["d"])("page")],O.prototype,"updatePage",null),O=Object(c["a"])([Object(p["a"])({components:{QuestionRenderer:q}})],O);var P=O,V=P,j=Object(k["a"])(V,d,v,!1,null,null,null),S=j.exports,T=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},A=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"grid-container"},[r("div",{staticClass:"grid-x grid-padding-x"},[r("div",{staticClass:"cell"},[r("h1",[e._v("Responses saved")]),r("p",[e._v("Your responses have been saved. Thank you very much for your time and effort. You can now close this browser window.")])])])])}],E=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return r}(p["c"]);E=Object(c["a"])([p["a"]],E);var M=E,H=M,B=Object(k["a"])(H,T,A,!1,null,null,null),R=B.exports,$=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"mounted",value:function(){var e=document.getElementById("ExperimentFrontendConfig");if(e){var t=JSON.parse(e.innerHTML);t&&this.$store.dispatch("init",t)}}},{key:"resetExperiment",value:function(){this.$store.dispatch("developmentResetExperiment")}},{key:"experiment",get:function(){return this.$store.state.experiment}},{key:"progress",get:function(){return this.$store.state.ui.busyMaxCounter>0?(this.$store.state.ui.busyMaxCounter-this.$store.state.ui.busyCounter)/this.$store.state.ui.busyMaxCounter:-1}},{key:"currentPage",get:function(){return this.$store.state.progress.current}}]),r}(p["c"]);$=Object(c["a"])([Object(p["a"])({components:{PageRenderer:S,StudyCompleted:R}})],$);var U=$,F=U,N=Object(k["a"])(F,a,n,!1,null,null,null),L=N.exports,z=(r("d3b7"),r("3ca3"),r("ddb0"),r("2f62")),I=r("bc3a"),Q=r.n(I);function G(e,t,r){var s={},a=e.getItem("ess:storage");a&&(s=JSON.parse(a));for(var n=t.split("."),i=s,o=0;o<n.length;o++){var u=n[o];o===n.length-1?i[u]=r:(i[u]||(i[u]={}),i=i[u])}e.setItem("ess:storage",JSON.stringify(s))}function Z(e,t,r){var s=e.getItem("ess:storage");if(!s)return r;for(var a=JSON.parse(s),n=t.split("."),i=a,o=0;o<n.length;o++){var u=n[o];if(o===n.length-1)return void 0!==i[u]?i[u]:r;if(!i[u])return r;i=i[u]}}function J(e,t){var r={},s=e.getItem("ess:storage");s&&(r=JSON.parse(s));for(var a=t.split("."),n=r,i=0;i<a.length;i++){var o=a[i];if(i===a.length-1)delete n[o];else{if(!n[o])break;n=n[o]}}e.setItem("ess:storage",JSON.stringify(r))}function K(e,t){G(sessionStorage,e,t)}function X(e,t){return Z(sessionStorage,e,t)}function D(e){return J(sessionStorage,e)}function Y(e,t){G(localStorage,e,t)}function W(e,t){return Z(localStorage,e,t)}function ee(e){return J(localStorage,e)}s["a"].use(z["a"]);var te=new z["a"].Store({state:{config:{api:{baseUrl:"",extraUrl:"",csrfToken:"",validationUrl:"",submissionUrl:""},experiment:{id:""}},experiment:null,pages:{},transitions:{},questionTypeGroups:[],questionTypes:{},questions:{},progress:{current:null,completed:!0,responses:{}},participant:null,ui:{loaded:!1,busy:!1,busyCounter:0,busyMaxCounter:0}},mutations:{setConfig:function(e,t){e.config=t},setBusy:function(e,t){t?(e.ui.busyCounter=e.ui.busyCounter+1,e.ui.busyMaxCounter=e.ui.busyMaxCounter+1):(e.ui.busyCounter=e.ui.busyCounter-1,0===e.ui.busyCounter&&setTimeout((function(){e.ui.busyMaxCounter=0}),400)),e.ui.busy=e.ui.busyCounter>0},setLoaded:function(e,t){e.ui.loaded=t},setQuestionTypeGroups:function(e,t){s["a"].set(e,"questionTypeGroups",t)},setQuestionType:function(e,t){s["a"].set(e.questionTypes,t.id,t)},setExperiment:function(e,t){s["a"].set(e,"experiment",t)},setPage:function(e,t){s["a"].set(e.pages,t.id,t)},setTransition:function(e,t){t.id&&s["a"].set(e.transitions,t.id,t)},setQuestion:function(e,t){s["a"].set(e.questions,t.id,t)},setCurrentPage:function(e,t){s["a"].set(e.progress,"current",t),e.experiment&&K(e.experiment.id+".progress.currentPage",t?t.id:null)},setCompleted:function(e,t){s["a"].set(e.progress,"completed",t),e.experiment&&t&&(D(e.experiment.id),Y(e.experiment.id+".completed",!0))},setPageResponses:function(e,t){s["a"].set(e.progress.responses,t.page,t.responses),e.experiment&&K(e.experiment.id+".responses."+t.page,t.responses)},setResponses:function(e,t){s["a"].set(e.progress,"responses",t)},setParticipant:function(e,t){s["a"].set(e,"participant",t),K(t.relationships.experiment.data.id+".participant",t.id)}},actions:{init:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.dispatch,s("setConfig",t),s("setBusy",!0),r.prev=3,r.next=6,Promise.all([a("loadQuestionTypes"),a("loadExperiment"),a("loadParticipant")]);case 6:a("resetExperiment"),s("setLoaded",!0),s("setBusy",!1),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](3),s("setBusy",!1);case 14:case"end":return r.stop()}}),r,null,[[3,11]])})))()},loadQuestionTypes:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,s=e.state,t.prev=1,r("setBusy",!0),t.next=5,Q.a.get(s.config.api.extraUrl+"/question_type_groups");case 5:a=t.sent,n=a.data.data,r("setQuestionTypeGroups",n),i=0;case 9:if(!(i<n.length)){t.next=32;break}o=n[i],t.prev=11,r("setBusy",!0),u=0;case 14:if(!(u<o.relationships["question-types"].data.length)){t.next=23;break}return l=o.relationships["question-types"].data[u],t.next=18,Q.a.get(s.config.api.extraUrl+"/question_types/"+l.id);case 18:a=t.sent,r("setQuestionType",a.data.data);case 20:u++,t.next=14;break;case 23:r("setBusy",!1),t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](11),r("setBusy",!1);case 29:i++,t.next=9;break;case 32:return r("setBusy",!1),t.abrupt("return",Promise.resolve());case 36:return t.prev=36,t.t1=t["catch"](1),r("setBusy",!1),t.abrupt("return",Promise.reject());case 40:case"end":return t.stop()}}),t,null,[[1,36],[11,26]])})))()},loadExperiment:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,s=e.dispatch,a=e.state,r("setBusy",!0),t.prev=2,t.next=5,Q.a.get(a.config.api.baseUrl+"/experiments/"+a.config.experiment.id);case 5:for(n=t.sent,i=n.data.data,o=[],r("setExperiment",i),u=0;u<i.relationships.pages.data.length;u++)o.push(s("loadPage",i.relationships.pages.data[u].id));return r("setBusy",!1),t.abrupt("return",Promise.all(o));case 14:return t.prev=14,t.t0=t["catch"](2),t.abrupt("return",Promise.reject(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))()},loadPage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n,i,o,u,l,c,p,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.dispatch,n=e.state,s("setBusy",!0),r.prev=2,r.next=5,Q.a.get(n.config.api.baseUrl+"/experiments/"+n.config.experiment.id+"/pages/"+t);case 5:for(i=r.sent,o=null,n.pages[t]&&(o=n.pages[t].relationships.questions.data.map((function(e){return e.id}))),u=i.data.data,s("setPage",u),l=[],c=0;c<u.relationships.next.data.length;c++)l.push(a("loadTransition",u.relationships.next.data[c].id));for(p=[],d=0;d<u.relationships.questions.data.length;d++)p.push(u.relationships.questions.data[d].id),l.push(a("loadQuestion",[t,u.relationships.questions.data[d].id]));return o&&o.forEach((function(e){p.indexOf(e)<0&&s("deleteQuestion",n.questions[e])})),s("setBusy",!1),r.next=18,Promise.all(l);case 18:return r.abrupt("return",Promise.resolve(u));case 21:return r.prev=21,r.t0=r["catch"](2),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 25:case"end":return r.stop()}}),r,null,[[2,21]])})))()},loadTransition:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.state,r.prev=1,s("setBusy",!0),r.next=5,Q.a.get(a.config.api.baseUrl+"/experiments/"+a.config.experiment.id+"/transitions/"+t);case 5:return n=r.sent,s("setTransition",n.data.data),s("setBusy",!1),r.abrupt("return",Promise.resolve(n.data.data));case 11:return r.prev=11,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},loadQuestion:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.state,r.prev=1,s("setBusy",!0),r.next=5,Q.a.get(a.config.api.baseUrl+"/experiments/"+a.config.experiment.id+"/pages/"+t[0]+"/questions/"+t[1]);case 5:return n=r.sent,s("setQuestion",n.data.data),s("setBusy",!1),r.abrupt("return",Promise.resolve(n.data.data));case 11:return r.prev=11,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},loadParticipant:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,s=e.state,t.prev=1,r("setBusy",!0),a=X(s.config.experiment.id+".participant",null),null!==a){t.next=13;break}return t.next=7,Q()({method:"POST",url:s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/participants",headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 7:return n=t.sent,r("setParticipant",n.data.data),r("setBusy",!1),t.abrupt("return",Promise.resolve(n.data.data));case 13:return t.next=15,Q()({method:"GET",url:s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/participants/"+a,headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 15:return i=t.sent,r("setParticipant",i.data.data),r("setBusy",!1),t.abrupt("return",Promise.resolve(i.data.data));case 19:t.next=25;break;case 21:return t.prev=21,t.t0=t["catch"](1),r("setBusy",!1),t.abrupt("return",Promise.reject(t.t0));case 25:case"end":return t.stop()}}),t,null,[[1,21]])})))()},validateSubmission:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.state,r.prev=1,s("setBusy",!0),r.next=5,Q()({method:"POST",url:a.config.api.validationUrl,data:t,headers:{"X-CSRF-TOKEN":a.config.api.csrfToken}});case 5:return s("setPageResponses",t),s("setBusy",!1),r.abrupt("return",Promise.resolve(!0));case 10:return r.prev=10,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0.response.data.errors));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()},submitResponses:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,s=e.state,!s.participant){t.next=15;break}return t.prev=2,r("setBusy",!0),t.next=6,Q()({method:"POST",url:s.config.api.submissionUrl,data:{participant:s.participant.id,responses:s.progress.responses},headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 6:r("setCurrentPage",null),r("setCompleted",!0),r("setBusy",!1),t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](2),r("setBusy",!1),t.abrupt("return",Promise.reject(t.t0.response.data.errors));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},resetExperiment:function(e){var t=e.commit,r=e.state;if(r.experiment){var s=W(r.experiment.id+".completed",!1);if(s)t("setCompleted",!0);else if(r.experiment.relationships["first-page"]&&r.pages[r.experiment.relationships["first-page"].data.id]){var a=X(r.experiment.id+".progress.currentPage",r.experiment.relationships["first-page"].data.id);r.pages[a]?t("setCurrentPage",r.pages[a]):r.pages[r.experiment.relationships["first-page"].data.id]&&t("setCurrentPage",r.pages[r.experiment.relationships["first-page"].data.id]);var n=X(r.experiment.id+".responses",null);n&&t("setResponses",n)}}},developmentResetExperiment:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.dispatch,s=e.commit,a=e.state,!a.experiment||"development"!==a.experiment.attributes.status){t.next=9;break}return D(a.experiment.id),ee(a.experiment.id),s("setCompleted",!1),s("setResponses",{}),t.next=8,r("loadParticipant");case 8:r("resetExperiment");case 9:case"end":return t.stop()}}),t)})))()}},modules:{}});s["a"].config.productionTip=!1,new s["a"]({store:te,render:function(e){return e(L)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map