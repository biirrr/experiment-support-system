(function(e){function t(t){for(var s,i,o=t[0],u=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);c&&c(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},a={app:0},n=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frontend",attrs:{id:"app"}},[e.$store.state.ui.loaded?[e.currentPage?r("page-renderer",{attrs:{page:e.currentPage}}):e.$store.state.progress.completed?r("study-completed"):e._e(),e.$store.state.ui.busy?r("div",{staticClass:"busy-overlay"}):e._e(),"development"===e.experiment.attributes.status?r("div",{staticClass:"reset-experiment"},[r("button",{staticClass:"button alert",on:{click:e.resetExperiment}},[r("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M2 12C2 17 6 21 11 21C13.4 21 15.7 20.1 17.4 18.4L15.9 16.9C14.6 18.3 12.9 19 11 19C4.8 19 1.6 11.5 6.1 7.1S18 5.8 18 12H15L19 16H19.1L23 12H20C20 7 16 3 11 3S2 7 2 12M10 15H12V17H10V15M10 7H12V13H10V7"}})])])]):e._e()]:r("div",{staticClass:"busy-overlay"},[r("div",{staticClass:"loading"},[r("svg",{attrs:{viewBox:"0 0 200 200"}},[r("circle",{attrs:{cx:"100",cy:"100",r:"80",fill:"none","stroke-width":"12"}}),r("circle",{attrs:{cx:"100",cy:"100",r:"80",fill:"none","stroke-width":"12","stroke-dasharray":"502.654","stroke-dashoffset":502.654*(1-e.progress)}})]),r("span",[e._v("Loading...")])])])],2)},n=[],i=r("d4ec"),o=r("bee2"),u=r("262e"),l=r("2caf"),c=r("9ab4"),p=r("60a3"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"grid-container"},[r("div",{staticClass:"grid-x grid-padding-x"},[e.questions&&e.responses?r("form",{staticClass:"cell",on:{submit:e.submitForm}},[r("h1",[e._v(e._s(e.page.attributes.title))]),e._l(e.visibleQuestions,(function(t){return r("question-renderer",{key:t.id,attrs:{question:t,error:e.errors[t.id]},model:{value:e.responses[t.id],callback:function(r){e.$set(e.responses,t.id,r)},expression:"responses[question.id]"}})})),r("div",{staticClass:"buttons"},[r("ul",{staticClass:"menu"},[r("li",[r("button",{staticClass:"button"},[e._v(e._s(e.nextButtonLabel))])])])])],2):e._e()])])},v=[],f=(r("4de4"),r("4160"),r("caad"),r("d81d"),r("13d5"),r("4fad"),r("07ac"),r("ac1f"),r("2532"),r("1276"),r("159b"),r("5530")),b=r("3835"),h=(r("96cf"),r("1da1")),m=r("4979"),g=r.n(m),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.question&&e.questionType?r("section",{class:"question question-core-type-"+e.questionType.attributes.essCoreType+(e.error?" has-error":""),attrs:{id:"question-"+e.question.id}},[e.attributes.title?r("h2",{class:e.attributes.required?"required":""},[e.error?r("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(e.attributes.title)+" ")]):e._e(),"USEFDisplay"===e.renderType?r("div",{domProps:{innerHTML:e._s(e.attributes.content)}}):"USEFSingleLineInput"===e.renderType?r("div",[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"text"},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiLineInput"===e.renderType?r("div",[r("label",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFSingleChoice"===e.renderType?r("div",["vertical list"===e.attributes.display?r("ul",{staticClass:"no-bullet"},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("li",{key:s},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"radio"},domProps:{value:s,checked:e._q(e.localValue,s)},on:{change:function(t){e.localValue=s}}}),e._v(" "+e._s(a)+" ")])])})),0):"horizontal list"===e.attributes.display?r("table",{staticClass:"no-bullet"},[r("thead",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])})),0)]),r("tbody",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("td",{key:s,attrs:{scope:"col"}},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(a))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"radio"},domProps:{value:s,checked:e._q(e.localValue,s)},on:{change:function(t){e.localValue=s}}})])])})),0)])]):r("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?r:r[0]}}},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("option",{key:s,domProps:{value:s}},[e._v(e._s(a))])})),0),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiChoice"===e.renderType?r("div",["vertical list"===e.attributes.display?r("ul",{staticClass:"no-bullet"},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("li",{key:s},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.localValue)?e._i(e.localValue,s)>-1:e.localValue},on:{change:function(t){var r=e.localValue,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=s,o=e._i(r,i);a.checked?o<0&&(e.localValue=r.concat([i])):o>-1&&(e.localValue=r.slice(0,o).concat(r.slice(o+1)))}else e.localValue=n}}}),e._v(" "+e._s(a)+" ")])])})),0):"horizontal list"===e.attributes.display?r("table",{staticClass:"no-bullet"},[r("thead",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])})),0)]),r("tbody",[r("tr",e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("td",{key:s,attrs:{scope:"col"}},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(a))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.localValue)?e._i(e.localValue,s)>-1:e.localValue},on:{change:function(t){var r=e.localValue,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=s,o=e._i(r,i);a.checked?o<0&&(e.localValue=r.concat([i])):o>-1&&(e.localValue=r.slice(0,o).concat(r.slice(o+1)))}else e.localValue=n}}})])])})),0)])]):r("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:"question-"+e.question.id,multiple:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?r:r[0]}}},e._l(e.zip(e.attributes.values,e.attributes.labels),(function(t){var s=t[0],a=t[1];return r("option",{key:s,domProps:{value:s}},[e._v(e._s(a))])})),0),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFHidden"===e.renderType?r("div",[r("input",{attrs:{name:"question-"+e.question.id,type:"hidden"},domProps:{value:e.attributes.value}})]):"USEFSingleChoiceGrid"===e.renderType?r("div",[r("table",[r("thead",[r("th"),e._l(e.zip(e.attributes.columnValues,e.attributes.columnLabels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])}))],2),r("tbody",e._l(e.zip(e.attributes.rowValues,e.attributes.rowLabels),(function(t){var s=t[0],a=t[1];return r("tr",{key:s,class:e.error&&e.error[s]?"has-error":""},[r("th",{attrs:{scope:"row"}},[e.error&&e.error[s]?r("svg",{staticClass:"mdi icon small alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(a)+" ")]),e._l(e.zip(e.attributes.columnValues,e.attributes.columnLabels),(function(t){var a=t[0],n=t[1];return r("td",{key:a},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(n))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value[s],expression:"value[row]"}],attrs:{name:"question-"+e.question.id+"."+s,type:"radio"},domProps:{value:a,checked:e._q(e.value[s],a)},on:{change:function(t){return e.$set(e.value,s,a)}}})])])}))],2)})),0)]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFMultiChoiceGrid"===e.renderType?r("div",[r("table",[r("thead",[r("th"),e._l(e.zip(e.attributes.columnValues,e.attributes.columnLabels),(function(t){var s=t[0],a=t[1];return r("th",{key:s,attrs:{scope:"col"}},[e._v(e._s(a))])}))],2),r("tbody",e._l(e.zip(e.attributes.rowValues,e.attributes.rowLabels),(function(t){var s=t[0],a=t[1];return r("tr",{key:s,class:e.error&&e.error[s]?"has-error":""},[r("th",{attrs:{scope:"row"}},[e.error&&e.error[s]?r("svg",{staticClass:"mdi icon small alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]):e._e(),e._v(" "+e._s(a)+" ")]),e._l(e.zip(e.attributes.columnValues,e.attributes.columnLabels),(function(t){var a=t[0],n=t[1];return r("td",{key:a},[r("label",[r("span",{staticClass:"show-for-sr"},[e._v(e._s(n))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value[s],expression:"value[row]"}],attrs:{name:"question-"+e.question.id+"."+s,type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.value[s])?e._i(e.value[s],a)>-1:e.value[s]},on:{change:function(t){var r=e.value[s],n=t.target,i=!!n.checked;if(Array.isArray(r)){var o=a,u=e._i(r,o);n.checked?u<0&&e.$set(e.value,s,r.concat([o])):u>-1&&e.$set(e.value,s,r.slice(0,u).concat(r.slice(u+1)))}else e.$set(e.value,s,i)}}})])])}))],2)})),0)]),e.error?r("p",{staticClass:"error"},[r("span",{staticClass:"label alert"},[r("svg",{staticClass:"mdi icon small white",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),r("span",[e._v("Please answer this question.")])])]):e._e()]):"USEFInvalid"===e.renderType?r("p",[e._v("This question has an invalid question type and cannot be displayed.")]):e._e()]):e._e()},x=[],C=(r("c975"),function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.localValue=null,e}return Object(o["a"])(r,[{key:"mounted",value:function(){this.localValue=g()(this.$props.value)}},{key:"valueChange",value:function(){this.$emit("input",this.localValue)}},{key:"zip",value:function(e,t){return e&&t?e.map((function(e,r){return r<t.length?[e,t[r]]:[e,e]})):[]}},{key:"attributes",get:function(){var e=this,t={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(r){e.question.attributes[r[0]]?t[r[0]]=e.question.attributes[r[0]]:r[1]&&"user"===r[1].source?"booleanValue"===r[1].type?t[r[0]]=!1:"listOfValues"===r[1].type?t[r[0]]=[]:r[1].allowed&&r[1].allowed.length>0?t[r[0]]=r[1].allowed[0]:t[r[0]]="":t[r[0]]=null})),t}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes.essCoreType.indexOf("USEF")?this.questionType.attributes.essCoreType:"USEFInvalid"}},{key:"questionType",get:function(){return this.$store.state.dataStore.data["question-types"][this.question.relationships["question-type"].data.id]}}]),r}(p["c"]));Object(c["a"])([Object(p["b"])()],C.prototype,"question",void 0),Object(c["a"])([Object(p["b"])()],C.prototype,"value",void 0),Object(c["a"])([Object(p["b"])()],C.prototype,"error",void 0),Object(c["a"])([Object(p["d"])("localValue")],C.prototype,"valueChange",null),C=Object(c["a"])([p["a"]],C);var w=C,_=w,k=r("2877"),O=Object(k["a"])(_,y,x,!1,null,null,null),S=O.exports,V=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.responses=null,e.errors={},e}return Object(o["a"])(r,[{key:"mounted",value:function(){this.responses=this.createResponseSet(),this.errors={},window.document.title=this.page.attributes.title}},{key:"updatePage",value:function(){this.responses=this.createResponseSet(),this.errors={},window.document.title=this.page.attributes.title}},{key:"submitForm",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.responses){e.next=21;break}if(e.prev=2,!this.isLastPage){e.next=10;break}return e.next=6,this.$store.dispatch("validateSubmission",{page:this.page.id,responses:this.validatableResponses(this.responses)});case 6:return e.next=8,this.$store.dispatch("submitResponses");case 8:e.next=15;break;case 10:return this.errors={},e.next=13,this.$store.dispatch("validateSubmission",{page:this.page.id,responses:this.validatableResponses(this.responses)});case 13:r=this.$store.state.dataStore.data.transitions[this.page.relationships.next.data[0].id],r&&(s=this.$store.state.dataStore.data.pages[r.relationships.target.data.id],s&&this.$store.commit("setCurrentPage",s));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),this.errors=e.t0.reduce((function(e,t){var r=t.source.pointer.split("/");return e[r[r.length-1]]=t.title,e}),{}),console.log(this.errors);case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createResponseSet",value:function(){var e=this,t={};return this.questions.forEach((function(r){var s=e.$store.state.dataStore.data["question-types"][r.relationships["question-type"].data.id];if(s){var a=void 0;e.$store.state.progress.responses[e.page.id]&&e.$store.state.progress.responses[e.page.id][r.id]&&(a=e.$store.state.progress.responses[e.page.id][r.id]),"USEFDisplay"===s.attributes.essCoreType?t[r.id]=void 0:"USEFSingleLineInput"===s.attributes.essCoreType||"USEFMultiLineInput"===s.attributes.essCoreType||"USEFSingleChoice"===s.attributes.essCoreType?t[r.id]=void 0==a?null:a:"USEFMultiChoice"===s.attributes.essCoreType?t[r.id]=void 0==a?[]:a:"USEFHidden"===s.attributes.essCoreType?t[r.id]=r.attributes.value:"USEFSingleChoiceGrid"===s.attributes.essCoreType?(t[r.id]={},r.attributes.rowValues.forEach((function(e){a&&void 0!==a[e]?t[r.id][e]=a[e]:t[r.id][e]=null}))):"USEFMultiChoiceGrid"===s.attributes.essCoreType&&(t[r.id]={},r.attributes.rowValues.forEach((function(e){a&&void 0!==a[e]?t[r.id][e]=a[e]:t[r.id][e]=[]})))}})),t}},{key:"validatableResponses",value:function(e){var t={};return Object.entries(e).forEach((function(e){var r=Object(b["a"])(e,2),s=r[0],a=r[1];void 0!==a&&(t[s]=a)})),t}},{key:"questions",get:function(){var e=this;return this.page.relationships.questions.data.map((function(t){return e.$store.state.dataStore.data.questions[t.id]})).filter((function(e){return e}))}},{key:"visibleQuestions",get:function(){var e={};return Object.values(this.$store.state.progress.responses).forEach((function(t){Object.entries(t).forEach((function(t){var r=Object(b["a"])(t,2),s=r[0],a=r[1];e[s]=g()(a)}))})),e=Object(f["a"])(Object(f["a"])({},e),this.responses),this.questions.filter((function(t){if(t.attributes.essConditional&&""!==t.attributes.essConditional.question){var r=null;if(r=t.attributes.essConditional.subQuestion&&e[t.attributes.essConditional.question]?e[t.attributes.essConditional.question][t.attributes.essConditional.subQuestion]:e[t.attributes.essConditional.question],"eq"===t.attributes.essConditional.operator){if(r&&(r===t.attributes.essConditional.value||Array.isArray(r)&&r.includes(t.attributes.essConditional.value)))return!0}else if("neq"===t.attributes.essConditional.operator){if(!r)return!0;if(Array.isArray(r)&&!r.includes(t.attributes.essConditional.value))return!0;if(r!==t.attributes.essConditional.value)return!0}return!1}return!0}))}},{key:"isFirstPage",get:function(){return this.$store.getters.experiment.relationships["first-page"].data.id===this.page.id}},{key:"isLastPage",get:function(){return!this.page.relationships.next||0===this.page.relationships.next.data.length}},{key:"nextButtonLabel",get:function(){return this.$store.state.ui.busy?this.isLastPage?"Saving...":"Validating...":this.isLastPage?"Finish":this.isFirstPage?"Start":"Next page"}}]),r}(p["c"]);Object(c["a"])([Object(p["b"])()],V.prototype,"page",void 0),Object(c["a"])([Object(p["d"])("page")],V.prototype,"updatePage",null),V=Object(c["a"])([Object(p["a"])({components:{QuestionRenderer:S}})],V);var q=V,j=q,P=Object(k["a"])(j,d,v,!1,null,null,null),A=P.exports,M=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"grid-container"},[r("div",{staticClass:"grid-x grid-padding-x"},[r("div",{staticClass:"cell"},[r("h1",[e._v("Responses saved")]),r("p",[e._v("Your responses have been saved. Thank you very much for your time and effort. You can now close this browser window.")])])])])}],H=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return r}(p["c"]);H=Object(c["a"])([p["a"]],H);var E=H,R=E,$=Object(k["a"])(R,M,T,!1,null,null,null),F=$.exports,B=function(e){Object(u["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"mounted",value:function(){var e=document.getElementById("ExperimentFrontendConfig");if(e){var t=JSON.parse(e.innerHTML);t&&this.$store.dispatch("init",t)}}},{key:"resetExperiment",value:function(){this.$store.dispatch("developmentResetExperiment")}},{key:"experiment",get:function(){return this.$store.getters.experiment}},{key:"progress",get:function(){return this.$store.state.ui.busyMaxCounter>0?(this.$store.state.ui.busyMaxCounter-this.$store.state.ui.busyCounter)/this.$store.state.ui.busyMaxCounter:-1}},{key:"currentPage",get:function(){return this.$store.state.progress.current}}]),r}(p["c"]);B=Object(c["a"])([Object(p["a"])({components:{PageRenderer:A,StudyCompleted:F}})],B);var L=B,U=L,N=Object(k["a"])(U,a,n,!1,null,null,null),z=N.exports,I=(r("99af"),r("d3b7"),r("3ca3"),r("ddb0"),r("bc3a")),Q=r.n(I),Z=r("2f62"),J=r("bd0f");function G(e,t,r){var s={},a=e.getItem("ess:storage");a&&(s=JSON.parse(a));for(var n=t.split("."),i=s,o=0;o<n.length;o++){var u=n[o];o===n.length-1?i[u]=r:(i[u]||(i[u]={}),i=i[u])}e.setItem("ess:storage",JSON.stringify(s))}function D(e,t,r){var s=e.getItem("ess:storage");if(s)for(var a=JSON.parse(s),n=t.split("."),i=a,o=0;o<n.length;o++){var u=n[o];if(o===n.length-1)return void 0!==i[u]?i[u]:r;if(!i[u])return r;i=i[u]}return r}function K(e,t){var r={},s=e.getItem("ess:storage");s&&(r=JSON.parse(s));for(var a=t.split("."),n=r,i=0;i<a.length;i++){var o=a[i];if(i===a.length-1)delete n[o];else{if(!n[o])break;n=n[o]}}e.setItem("ess:storage",JSON.stringify(r))}function X(e,t){G(sessionStorage,e,t)}function Y(e,t){return D(sessionStorage,e,t)}function W(e){return K(sessionStorage,e)}function ee(e,t){G(localStorage,e,t)}function te(e,t){return D(localStorage,e,t)}function re(e){return K(localStorage,e)}s["a"].use(Z["a"]);var se=new Z["a"].Store({state:{config:{dataStore:{apiBaseUrl:"",csrfToken:""},api:{validationUrl:"",submissionUrl:""},experiment:{id:""}},ui:{loaded:!1,busy:!1,busyCounter:0,busyMaxCounter:0},progress:{participant:null,current:null,completed:!1,responses:{}}},mutations:{setConfig:function(e,t){e.config=t},setBusy:function(e,t){t?(e.ui.busyCounter=e.ui.busyCounter+1,e.ui.busyMaxCounter=e.ui.busyMaxCounter+1):(e.ui.busyCounter=e.ui.busyCounter-1,0===e.ui.busyCounter&&setTimeout((function(){e.ui.busyMaxCounter=0}),100)),e.ui.busy=e.ui.busyCounter>0},setLoaded:function(e,t){setTimeout((function(){e.ui.loaded=t}),100)},setCurrentPage:function(e,t){s["a"].set(e.progress,"current",t),X(e.config.experiment.id+".progress.currentPage",t?t.id:null)},setCompleted:function(e,t){s["a"].set(e.progress,"completed",t),t&&(W(e.config.experiment.id),ee(e.config.experiment.id+".completed",!0))},setPageResponses:function(e,t){s["a"].set(e.progress.responses,t.page,t.responses),e.config.experiment&&X(e.config.experiment.id+".responses."+t.page,t.responses)},setResponses:function(e,t){s["a"].set(e.progress,"responses",t),e.config.experiment&&X(e.config.experiment.id+".responses",t)},setParticipant:function(e,t){s["a"].set(e.progress,"participant",t),X(t.relationships.experiment.data.id+".participant",t.id)}},actions:{init:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.dispatch,n=e.state,s("setConfig",t),s("setBusy",!0),r.next=5,Promise.all([a("loadExperiment",{type:"experiments",id:n.config.experiment.id}),a("setupParticipant")]);case 5:return r.next=7,a("setupExperiment");case 7:s("setBusy",!1),s("setLoaded",!0);case 9:case"end":return r.stop()}}),r)})))()},loadExperiment:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.dispatch,r.next=3,s("fetchSingle",t);case 3:return a=r.sent,n=a.relationships.pages.data.map((function(e){return s("loadPage",e)})),r.next=7,Promise.all(n);case 7:return r.abrupt("return",a);case 8:case"end":return r.stop()}}),r)})))()},loadPage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.dispatch,r.next=3,s("fetchSingle",t);case 3:return a=r.sent,n=a.relationships.next.data.map((function(e){return s("loadTransition",e)})),n=n.concat(a.relationships.questions.data.map((function(e){return s("loadQuestion",e)}))),r.next=8,Promise.all(n);case 8:return r.abrupt("return",a);case 9:case"end":return r.stop()}}),r)})))()},loadTransition:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.dispatch,r.next=3,s("fetchSingle",t);case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},loadQuestion:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.dispatch,r.next=3,s("fetchSingle",t);case 3:return a=r.sent,r.next=6,s("loadQuestionType",a.relationships["question-type"].data);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()},loadQuestionType:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.dispatch,r.next=3,s("fetchSingle",t);case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},setupParticipant:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.dispatch,s=e.commit,a=e.state,n=Y(a.config.experiment.id+".participant",null),null!==n){t.next=9;break}return t.next=5,r("createSingle",{type:"participants",attributes:{},relationships:{experiment:{data:{type:"experiments",id:a.config.experiment.id}}}});case 5:i=t.sent,s("setParticipant",i),t.next=21;break;case 9:return t.prev=9,t.next=12,r("fetchSingle",{type:"participants",id:n});case 12:o=t.sent,s("setParticipant",o),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](9),console.log(t.t0),W(a.config.experiment.id),r("setupParticipant");case 21:case"end":return t.stop()}}),t,null,[[9,16]])})))()},setupExperiment:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,s=e.getters,a=e.state,n=s.experiment,i=te(n.id+".completed",!1),i?r("setCompleted",!0):n.relationships["first-page"]?(o=Y(n.id+".progress.currentPage",n.relationships["first-page"].data.id),a.dataStore.data.pages[o]?r("setCurrentPage",a.dataStore.data.pages[o]):r("setCurrentPage",n.relationships["first-page"].data.id),u=Y(n.id+".responses",null),u&&r("setResponses",u)):r("setCompleted",!0);case 4:case"end":return t.stop()}}),t)})))()},validateSubmission:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,a=e.state,r.prev=1,s("setBusy",!0),n=g()(a.progress.responses),n[t.page]=t.responses,r.next=7,Q()({method:"POST",url:a.config.api.validationUrl,data:{page:t.page,responses:n},headers:{"X-CSRF-TOKEN":a.config.dataStore.csrfToken}});case 7:return s("setPageResponses",t),s("setBusy",!1),r.abrupt("return",Promise.resolve(!0));case 12:return r.prev=12,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0.response.data.errors));case 16:case"end":return r.stop()}}),r,null,[[1,12]])})))()},submitResponses:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,s=e.state,!s.progress.participant){t.next=15;break}return t.prev=2,r("setBusy",!0),t.next=6,Q()({method:"POST",url:s.config.api.submissionUrl,data:{participant:s.progress.participant.id,responses:s.progress.responses},headers:{"X-CSRF-TOKEN":s.config.dataStore.csrfToken}});case 6:r("setCurrentPage",null),r("setCompleted",!0),r("setBusy",!1),t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](2),r("setBusy",!1),t.abrupt("return",Promise.reject(t.t0.response.data.errors));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},developmentResetExperiment:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.dispatch,s=e.commit,a=e.getters,!a.experiment||"development"!==a.experiment.attributes.status){t.next=10;break}return W(a.experiment.id),re(a.experiment.id),s("setCompleted",!1),s("setResponses",{}),t.next=8,r("setupParticipant");case 8:return t.next=10,r("setupExperiment");case 10:case"end":return t.stop()}}),t)})))()}},getters:{experiment:function(e){return e.dataStore.data.experiments&&e.dataStore.data.experiments[e.config.experiment.id]?e.dataStore.data.experiments[e.config.experiment.id]:null}},modules:{dataStore:J["dataStoreModule"]}});s["a"].config.productionTip=!1,new s["a"]({store:se,render:function(e){return e(z)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map