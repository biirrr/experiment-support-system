(function(t){function e(e){for(var r,n,o=e[0],u=e[1],l=e[2],p=0,d=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,o=1;o<a.length;o++){var u=a[o];0!==s[u]&&(r=!1)}r&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},s={app:0},i=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/experiment-editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"37ba":function(t,e,a){},"6d73":function(t,e,a){"use strict";var r=a("37ba"),s=a.n(r);e["default"]=s.a},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"experiment-editor",attrs:{id:"app"}},[t.progress>=0?a("div",{staticClass:"busy"},[a("progress",{attrs:{max:"100"},domProps:{value:t.progress}}),t.$store.state.ui.busy?a("div",{staticClass:"busy-overlay"}):t._e()]):t._e(),t.experiment?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h1",[t._v(t._s(t.experiment.attributes.title))])]),a("div",{staticClass:"cell shrink"},[a("nav",[a("ul",{staticClass:"menu"},[a("li",[a("a",{attrs:{href:t.$store.state.config.experiment.externalUrl,target:"_blank",rel:"noopener"}},["development"===t.experiment.attributes.status?[t._v(" Test the Experiment ")]:[t._v(" Test URL ")]],2)]),a("li",[a("select",{on:{change:function(e){return t.changeStatus(e)}}},["development"===t.experiment.attributes.status?[a("option",{attrs:{value:"development",selected:"selected"}},[t._v("Development")]),a("option",{attrs:{value:"live"}},[t._v("Live")])]:[a("option",{attrs:{value:"live"},domProps:{selected:"live"===t.experiment.attributes.status?"selected":null}},[t._v("Live")]),a("option",{attrs:{value:"paused"},domProps:{selected:"paused"===t.experiment.attributes.status?"selected":null}},[t._v("Pause")]),a("option",{attrs:{value:"completed"},domProps:{selected:"completed"===t.experiment.attributes.status?"selected":null}},[t._v("Complete")])]],2)])])])])]):t._e(),a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("nav",{staticClass:"margin-bottom"},[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=(e.isActive,e.isExactActive);return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"0",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Overview")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Pages")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/results"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Results")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/settings"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Settings")])])]}}],null,!0)})],1)])]}}])}),t.experiment?a("router-view"):t._e()],1)},i=[],n=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),c=a("9ab4"),p=a("60a3"),d=a("b85c"),h=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"render",value:function(){if(this.$scopedSlots.default)return this.$scopedSlots.default({keyboardNav:this.keyboardNavigation,mouseClickNav:this.mouseClickNavigation})}},{key:"keyboardNavigation",value:function(t){var e=t.target;if(e)if(39===t.keyCode){var a=this.findNextMenuitem(this.getParentMenubar(e),e,"next");a&&a.focus()}else if(37===t.keyCode){var r=this.findNextMenuitem(this.getParentMenubar(e),e,"previous");r&&r.focus()}else if(38===t.keyCode||40===t.keyCode){if(e.parentElement&&e.parentElement.children){var s,i=Object(d["a"])(e.parentElement.children);try{for(i.s();!(s=i.n()).done;){var n=s.value;if("menu"===n.getAttribute("role")){n.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var o=this.findNextMenuitem(n,null,"next");o&&o.focus()}}}catch(h){i.e(h)}finally{i.f()}}}else if((13===t.keyCode||32==t.keyCode)&&e.parentElement&&e.parentElement.children){var u,l=Object(d["a"])(e.parentElement.children);try{for(l.s();!(u=l.n()).done;){var c=u.value;if("menu"===c.getAttribute("role"))if("false"===c.getAttribute("aria-hidden"))c.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false");else{c.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var p=this.findNextMenuitem(c,null,"next");if(p)return void p.focus()}}}catch(h){l.e(h)}finally{l.f()}e.click()}}},{key:"mouseClickNavigation",value:function(t){var e=t.target;if(e&&e.parentElement&&e.parentElement.children){var a,r=Object(d["a"])(e.parentElement.children);try{for(r.s();!(a=r.n()).done;){var s=a.value;if("menu"===s.getAttribute("role"))if("false"===s.getAttribute("aria-hidden"))s.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false");else{s.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var i=this.findNextMenuitem(s,null,"next");if(i)return void i.focus()}}}catch(n){r.e(n)}finally{r.f()}}}},{key:"getParentMenubar",value:function(t){return t?"menubar"===t.getAttribute("role")?t:this.getParentMenubar(t.parentElement):null}},{key:"findNextMenuitem",value:function(t,e,a){if(!t)return null;var r=[];if("next"===a)for(var s=t.children.length-1;s>=0;s--)r.push(t.children[s]);else for(var i=0;i<t.children.length;i++)r.push(t.children[i]);var n=0;e||(n=1);while(r.length>0){var o=r.pop();if(0===n&&o===e)n=1;else if(1===n&&"menuitem"===o.getAttribute("role")&&"true"!==o.getAttribute("aria-disabled"))return o;if("menu"!==o.getAttribute("role"))if("next"===a)for(var u=o.children.length-1;u>=0;u--)r.push(o.children[u]);else for(var l=0;l<o.children.length;l++)r.push(o.children[l])}return null}}]),a}(p["c"]);h=Object(c["a"])([Object(p["a"])({})],h);var v,f,b=h,m=b,g=a("6d73"),y=a("2877");function x(t){this["$style"]=g["default"].locals||g["default"]}var _=Object(y["a"])(m,v,f,!1,x,null,null),k=_.exports,O=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"mounted",value:function(){var t=document.getElementById("ExperimentEditorConfig");if(t){var e=JSON.parse(t.innerHTML);e&&this.$store.dispatch("init",e)}}},{key:"changeStatus",value:function(t){t&&t.target&&this.$store.dispatch("updateExperimentAttribute",{attribute:"status",value:t.target.value})}},{key:"experiment",get:function(){return this.$store.state.experiment}},{key:"progress",get:function(){return this.$store.state.ui.busyMaxCounter>0?100/this.$store.state.ui.busyMaxCounter*(this.$store.state.ui.busyMaxCounter-this.$store.state.ui.busyCounter):-1}}]),a}(p["c"]);O=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k}})],O);var j=O,w=j,q=Object(y["a"])(w,s,i,!1,null,null,null),C=q.exports,P=a("8c4f"),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v(t._s(t.experiment.attributes.description))]),a("table",{staticStyle:{"max-width":"20rem"}},[a("tbody",[a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Participants")]),a("td",[t._v(t._s(t.experiment.attributes._stats.participants.started))])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Completed")]),a("td",[t._v(t._s(t.experiment.attributes._stats.participants.completed)),t.experiment.attributes._stats.participants.started>0?[t._v(" ("+t._s(Math.round(100/t.experiment.attributes._stats.participants.started*t.experiment.attributes._stats.participants.completed))+"%)")]:t._e()],2)])])])])},$=[],E=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"experiment",get:function(){return this.$store.state.experiment}}]),a}(p["c"]);E=Object(c["a"])([p["a"]],E);var A=E,V=A,M=Object(y["a"])(V,T,$,!1,null,null,null),R=M.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isCurrentRoute?a("div",[a("nav",[a("ul",{staticClass:"menu align-right"},[a("router-link",{attrs:{to:"/pages/create"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.href,s=e.navigate;return[a("li",{attrs:{role:"presentation"}},[a("a",{staticClass:"button hollow small primary",attrs:{href:r},on:{click:s}},[t._v("Add a page")])])]}}],null,!1,2922356803)})],1)]),a("ul",{staticClass:"no-bullet"},t._l(t.pages,(function(e){return a("li",{key:e.id,staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h2",[a("router-link",{attrs:{to:"/pages/"+e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")])],1),a("ul",{staticClass:"menu"},[0===e.relationships.next.data.length?a("li",{staticClass:"menu-text"},[t._v("End of Experiment")]):[a("li",{staticClass:"menu-text"},[t._v("Transition to")]),t._l(e.relationships.next.data,(function(e){return[t.pageForTransitionId(e.id)?[a("router-link",{key:e.id,attrs:{to:"/pages/"+t.pageForTransitionId(e.id).id},scopedSlots:t._u([{key:"default",fn:function(r){var s=r.href,i=r.navigate;return[a("li",[a("a",{attrs:{href:s},on:{click:i}},[t._v(t._s(t.pageForTransitionId(e.id).attributes.name))])])]}}],null,!0)})]:t._e()]}))]],2)]),a("div",{staticClass:"cell shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var s=r.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/pages/"+e.id},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.href,r=t.navigate;return[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Edit this page",href:e},on:{keyup:s,click:r}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])])])]}}],null,!0)}),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Delete this page"},on:{keyup:s,click:function(a){return t.deletePage(e)}}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])],1)]}}],null,!0)})],1)])})),0)]):a("router-view")},S=[],H=(a("99af"),a("4160"),a("b0c0"),a("07ac"),a("159b"),a("96cf"),a("1da1")),L=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"pageForTransitionId",value:function(t){var e=this.$store.state.transitions[t];return e?this.$store.state.pages[e.relationships.target.data.id]:null}},{key:"deletePage",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm('Please confirm that you wish to delete the page "'+e.attributes.name+'"?')){t.next=3;break}return t.next=3,this.$store.dispatch("deletePage",e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"flattenPages",value:function(t){var e=this,a=[t];return t.relationships.next&&t.relationships.next.data.forEach((function(t){var r=e.$store.state.transitions[t.id];if(r&&r.relationships.target){var s=e.$store.state.pages[r.relationships.target.data.id];s&&(a=a.concat(e.flattenPages(s)))}})),a}},{key:"experiment",get:function(){return this.$store.state.experiment}},{key:"firstPage",get:function(){return this.experiment&&this.experiment.relationships["first-page"]?this.$store.state.pages[this.experiment.relationships["first-page"].data.id]:null}},{key:"pages",get:function(){if(this.firstPage){var t=this.flattenPages(this.firstPage);return Object.values(this.$store.state.pages).forEach((function(e){var a=!1;t.forEach((function(t){e.id===t.id&&(a=!0)})),a||t.push(e)})),t}return Object.values(this.$store.state.pages)}},{key:"isCurrentRoute",get:function(){return"pages"===this.$route.name}}]),a}(p["c"]);L=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k}})],L);var F=L,U=F,N=Object(y["a"])(U,B,S,!1,null,null,null),I=N.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h2",[t._v("Add a new page")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createPage(e)}}},[a("input-field",{attrs:{type:"text",label:"Name",error:t.errors.name},model:{value:t.pageName,callback:function(e){t.pageName=e},expression:"pageName"}}),a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.pageTitle,callback:function(e){t.pageTitle=e},expression:"pageTitle"}}),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addMode,expression:"addMode"}],attrs:{type:"radio",name:"parent",value:"first"},domProps:{checked:t._q(t.addMode,"first")},on:{change:function(e){t.addMode="first"}}}),t._v(" Add as the first page ")]),t.hasPages?[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addMode,expression:"addMode"}],attrs:{type:"radio",name:"parent",value:"after"},domProps:{checked:t._q(t.addMode,"after")},on:{change:function(e){t.addMode="after"}}}),t._v(" Add after ")]),"after"===t.addMode?a("label",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.parentPageId,expression:"parentPageId"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.parentPageId=e.target.multiple?a:a[0]}}},t._l(t.pages,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.title))])})),0)]):t._e()]:t._e(),a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("a",{staticClass:"button secondary",on:{click:function(e){return t.cancelDialog(!1,e)}}},[t._v("Don't add")])]),t._m(0)])])],2)])])},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("button",{staticClass:"button primary"},[t._v("Add")])])}],G=(a("ac1f"),a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{class:t.error?"is-invalid-label":""},[t.labelBefore?[t._v(t._s(t.label))]:t._e(),"textarea"===t.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",domProps:{value:t.localValue},on:{input:function(e){e.target.composing||(t.localValue=e.target.value)}}}):"checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localValue)?t._i(t.localValue,null)>-1:t.localValue},on:{change:function(e){var a=t.localValue,r=e.target,s=!!r.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);r.checked?n<0&&(t.localValue=a.concat([i])):n>-1&&(t.localValue=a.slice(0,n).concat(a.slice(n+1)))}else t.localValue=s}}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:"radio"},domProps:{checked:t._q(t.localValue,null)},on:{change:function(e){t.localValue=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:t.type},domProps:{value:t.localValue},on:{input:function(e){e.target.composing||(t.localValue=e.target.value)}}}),t.labelBefore?t._e():[t._v(t._s(t.label))],t.error?a("span",{staticClass:"form-error is-visible"},[t._v(t._s(t.error))]):t._e()],2)])}),Z=[],D=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localValue="",t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.localValue=this.$props.value}},{key:"updatedValue",value:function(t){this.localValue=t}},{key:"updateLocalValue",value:function(t){t!==this.$props.value&&this.$emit("input",t)}},{key:"labelBefore",get:function(){return"radio"!=this.$props.type&&"checkbox"!=this.$props.type}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],D.prototype,"type",void 0),Object(c["a"])([Object(p["b"])()],D.prototype,"value",void 0),Object(c["a"])([Object(p["b"])()],D.prototype,"label",void 0),Object(c["a"])([Object(p["b"])()],D.prototype,"error",void 0),Object(c["a"])([Object(p["d"])("value")],D.prototype,"updatedValue",null),Object(c["a"])([Object(p["d"])("localValue")],D.prototype,"updateLocalValue",null),D=Object(c["a"])([p["a"]],D);var K=D,X=K,J=Object(y["a"])(X,G,Z,!1,null,null,null),W=J.exports,Y=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.addMode="first",t.pageName="",t.pageTitle="",t.parentPageId="",t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){if(this.hasPages){this.addMode="after",this.parentPageId=this.pages[0].id;for(var t=0;t<this.pages.length;t++)if(0===this.pages[t].relationships.next.data.length){this.parentPageId=this.pages[t].id;break}}}},{key:"updateAddMode",value:function(){if(this.hasPages){this.addMode="after",this.parentPageId=this.pages[0].id;for(var t=0;t<this.pages.length;t++)if(0===this.pages[t].relationships.next.data.length){this.parentPageId=this.pages[t].id;break}}else this.addMode="first"}},{key:"cancelDialog",value:function(t,e){var a=e.target;t||"a"!==a.localName&&"button"!==a.localName?t&&"div"===a.localName&&a.classList.contains("dialog-overlay")&&this.$router.push("/pages"):this.$router.push("/pages")}},{key:"createPage",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={mode:this.addMode,name:this.pageName,title:this.pageTitle},"after"===this.addMode&&(e.parentPageId=this.parentPageId),t.next=5,this.$store.dispatch("createPage",e);case 5:a=t.sent,this.$router.push("/pages/"+a.id),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),this.errors={},t.t0.forEach((function(t){var e=t.source.pointer.split("/");r.errors[e[e.length-1]]=t.title}));case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"pages",get:function(){return Object.values(this.$store.state.pages)}},{key:"hasPages",get:function(){return this.pages&&this.pages.length>0}},{key:"showPageSelect",get:function(){return this.hasPages&&"after"===this.addMode}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("pages")],Y.prototype,"updateAddMode",null),Y=Object(c["a"])([Object(p["a"])({components:{InputField:W}})],Y);var tt=Y,et=tt,at=Object(y["a"])(et,Q,z,!1,null,null,null),rt=at.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.page?a("div",{staticClass:"grid-x grid-padding-x page-editor"},[a("div",{staticClass:"cell auto"},[a("h2",[t._v(t._s(t.page.attributes.title))]),a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-3"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/pages/"+t.page.id},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isExactActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"0",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Edit")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages/"+t.page.id+"/transitions"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"0",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Transitions")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages/"+t.page.id+"/settings"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,i=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:s,tabindex:"0",role:"menuitem"},on:{keyup:r,click:i}},[t._v("Settings")])])]}}],null,!0)})],1)]}}],null,!1,110653490)})],1),t.isCurrentRoute?a("div",{staticClass:"cell large-9"},[0===t.questions.length?a("add-question",{attrs:{page:t.page,idx:-1}}):a("ol",{staticClass:"no-bullet"},t._l(t.questions,(function(e,r){return a("li",{key:e.id,staticClass:"question"},[t.insertIdx===r&&"before"===t.insertPosition?a("add-question",{attrs:{page:t.page,idx:r,canCancel:!0},on:{close:function(e){return t.insertQuestion(-1,"")}}}):a("div",{staticClass:"insert-link"},[a("a",{attrs:{"aria-label":"Insert a question before this question",title:"Insert a question before this question"},on:{click:function(e){return t.insertQuestion(r,"before")}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])]),a("question-block",{attrs:{question:e}}),t.insertIdx===r&&"after"===t.insertPosition?a("add-question",{attrs:{page:t.page,idx:r+1,canCancel:!0},on:{close:function(e){return t.insertQuestion(-1,"")}}}):a("div",{staticClass:"insert-link"},[a("a",{attrs:{"aria-label":"Insert a question after this question",title:"Insert a question after this question"},on:{click:function(e){return t.insertQuestion(r,"after")}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])])],1)})),0)],1):t._e(),t.isCurrentRoute?t._e():a("div",{staticClass:"cell large-9"},[a("router-view")],1)])])]):t._e()},it=[],nt=(a("4de4"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("ul",{staticClass:"vertical menu accordion-menu",attrs:{"data-accordion-menu":""}},[t._l(t.menuStructure,(function(e,r){return[e.questionTypes.length>0?a("li",{key:r,staticClass:"is-accordion-submenu-parent",attrs:{"aria-expanded":t.activeGroup===e.id?"true":"false"}},[a("a",{on:{click:function(a){return t.setActiveGroup(e.id)}}},[t._v(t._s(e.title))]),t.activeGroup===e.id?a("ul",{staticClass:"vertical menu nested is-accordion-submenu"},t._l(e.questionTypes,(function(e,r){return a("li",{key:r},[e?a("a",{on:{click:function(a){return t.addQuestion(e)}}},[t._v(t._s(e.attributes.label))]):t._e()])})),0):t._e()]):t._e()]}))],2),t.canCancel?a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("a",{staticClass:"button secondary small",on:{click:function(e){return t.$emit("close")}}},[t._v("Don't add")])])])]):t._e()])}),ot=[],ut=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.activeGroup=-1,t}return Object(o["a"])(a,[{key:"mounted",value:function(){1===this.menuStructure.length&&(this.activeGroup=this.menuStructure[0].id)}},{key:"setActiveGroup",value:function(t){this.activeGroup===t?this.activeGroup=-1:this.activeGroup=t}},{key:"addQuestion",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("addQuestion",{questionType:e,page:this.$props.page,idx:this.$props.idx});case 3:this.$emit("close"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),this.$emit("close");case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"menuStructure",get:function(){var t=this;return this.$store.state.questionTypeGroups.filter((function(t){return t.attributes["enabled"]})).map((function(e){return{id:e.id,title:e.attributes.title,questionTypes:e.relationships["question-types"].data.map((function(e){return t.$store.state.questionTypes[e.id]})).filter((function(t){return t&&t.attributes["_enabled"]}))}}))}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],ut.prototype,"page",void 0),Object(c["a"])([Object(p["b"])()],ut.prototype,"idx",void 0),Object(c["a"])([Object(p["b"])({default:!1})],ut.prototype,"canCancel",void 0),ut=Object(c["a"])([p["a"]],ut);var lt=ut,ct=lt,pt=Object(y["a"])(ct,nt,ot,!1,null,null,null),dt=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.editing?a("question-editor",{attrs:{question:t.question},on:{close:t.endEditing}}):a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},[a("question-renderer",{attrs:{question:t.question}})],1),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Edit"},on:{keyup:r,click:t.startEditing}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])])])])]}}])})],1)])},vt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.questionType?a("section",{class:"question question-type-"+t.questionType.attributes["_name"],attrs:{id:"question-"+t.question.id}},[t.attributes.title?a("h2",{class:t.attributes.required?"required":""},[t._v(t._s(t.attributes.title))]):t._e(),"USEFDisplay"===t.renderType?a("div",{domProps:{innerHTML:t._s(t.attributes.content)}}):"USEFSingleLineInput"===t.renderType?a("div",[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"text"}})])]):"USEFMultiLineInput"===t.renderType?a("div",[a("label",[a("textarea",{attrs:{name:"question-"+t.question.id}})])]):"USEFSingleChoice"===t.renderType?a("div",["vertical list"===t.attributes.display?a("ul",{staticClass:"no-bullet"},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("li",{key:r},[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"radio"},domProps:{value:r}}),t._v(" "+t._s(s)+" ")])])})),0):"horizontal list"===t.attributes.display?a("table",{staticClass:"no-bullet"},[a("thead",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(s))])})),0)]),a("tbody",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("td",{key:r,attrs:{scope:"col"}},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(s))]),a("input",{attrs:{name:"question-"+t.question.id,type:"radio"},domProps:{value:r}})])])})),0)])]):a("select",{attrs:{name:"question-"+t.question.id}},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("option",{key:r,domProps:{value:r}},[t._v(t._s(s))])})),0)]):"USEFMultiChoice"===t.renderType?a("div",["vertical list"===t.attributes.display?a("ul",{staticClass:"no-bullet"},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("li",{key:r},[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"checkbox"},domProps:{value:r}}),t._v(" "+t._s(s)+" ")])])})),0):"horizontal list"===t.attributes.display?a("table",{staticClass:"no-bullet"},[a("thead",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(s))])})),0)]),a("tbody",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("td",{key:r,attrs:{scope:"col"}},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(s))]),a("input",{attrs:{name:"question-"+t.question.id,type:"checkbox"},domProps:{value:r}})])])})),0)])]):a("select",{attrs:{name:"question-"+t.question.id,multiple:""}},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("option",{key:r,domProps:{value:r}},[t._v(t._s(s))])})),0)]):"USEFHidden"===t.renderType?a("div",[a("input",{attrs:{name:"question-"+t.question.id,type:"hidden"},domProps:{value:t.attributes.value}})]):"USEFSingleChoiceGrid"===t.renderType?a("div",[a("table",[a("thead",[a("th"),t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var r=e[0],s=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(s))])}))],2),a("tbody",t._l(t.zip(t.attributes.row_values,t.attributes.row_labels),(function(e){var r=e[0],s=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s))]),t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var s=e[0],i=e[1];return a("td",{key:s},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(i))]),a("input",{attrs:{name:"question-"+t.question.id+"."+r,type:"radio"},domProps:{value:s}})])])}))],2)})),0)])]):"USEFMultiChoiceGrid"===t.renderType?a("div",[a("table",[a("thead",[a("th"),t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var r=e[0],s=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(s))])}))],2),a("tbody",t._l(t.zip(t.attributes.row_values,t.attributes.row_labels),(function(e){var r=e[0],s=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s))]),t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var s=e[0],i=e[1];return a("td",{key:s},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(i))]),a("input",{attrs:{name:"question-"+t.question.id+"."+r,type:"checkbox"},domProps:{value:s}})])])}))],2)})),0)])]):"USEFInvalid"===t.renderType?a("p",[t._v("This question has an invalid question type and cannot be displayed.")]):t._e()]):t._e()},bt=[],mt=(a("c975"),a("4fad"),function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"label",value:function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}},{key:"zip",value:function(t,e){return t.map((function(t,a){return a<e.length?[t,e[a]]:[t,t]}))}},{key:"questionType",get:function(){return this.$store.state.questionTypes[this.$props.question.relationships["question-type"].data.id]}},{key:"attributes",get:function(){var t=this,e={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(a){t.$props.question.attributes[a[0]]?e[a[0]]=t.$props.question.attributes[a[0]]:a[1]&&"user"===a[1].source?"booleanValue"===a[1].type?e[a[0]]=!1:"listOfValues"===a[1].type?e[a[0]]=[]:a[1].allowed&&a[1].allowed.length>0?e[a[0]]=a[1].allowed[0]:e[a[0]]="":e[a[0]]=null})),e}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes._core_type.indexOf("USEF")?this.questionType.attributes._core_type:"USEFInvalid"}}]),a}(p["c"]));Object(c["a"])([Object(p["b"])()],mt.prototype,"question",void 0),mt=Object(c["a"])([p["a"]],mt);var gt=mt,yt=gt,xt=Object(y["a"])(yt,ft,bt,!1,null,null,null),_t=xt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},t._l(t.editableAttributes,(function(e,r){return a("div",{key:r},["USEFDisplay"===t.questionType.attributes._core_type&&"singleValue"===e[1].type&&"format"===e[0]?a("label",[t._v(t._s(e[1].label)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]],expression:"localAttributes[attribute[0]]"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes,e[0],a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"text/html"}},[t._v("HTML")]),a("option",{attrs:{value:"text/text"}},[t._v("Text")])])]):"USEFSingleChoice"!==t.questionType.attributes._core_type&&"USEFMultiChoice"!==t.questionType.attributes._core_type||"singleValue"!==e[1].type||"display"!==e[0]?"listOfValues"==e[1].type?[a("label",[t._v(t._s(e[1].label))]),a("table",[a("tbody",t._l(t.localAttributes[e[0]],(function(r,s){return a("tr",{key:s},[a("td",[a("input",{attrs:{type:"text"},domProps:{value:r},on:{keyup:function(a){return t.setListOfValuesValue(e[0],s,a.target.value)}}})]),a("td",[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var i=r.keyboardNav;return[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Remove this value"},on:{keyup:i,click:function(a){return t.removeListOfValuesValue(e[0],s)}}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H5V11H19V13Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move this value up"},on:{keyup:i}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move this value down"},on:{keyup:i}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])])])])]}}],null,!0)})],1)])})),0),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"2"}},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var s=r.keyboardNav;return[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Add a value"},on:{keyup:s,click:function(a){return t.addListOfValuesValue(e[0])}}},[a("svg",{staticClass:"mdi icon success",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])])])]}}],null,!0)})],1)])])])]:"singleValue"===e[1].type?a("input-field",{attrs:{type:"text",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):"booleanValue"===e[1].type?a("input-field",{attrs:{type:"checkbox",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):"multiLineTextValue"===e[1].type?a("input-field",{attrs:{type:"textarea",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):a("div",[t._v(t._s(e[1]))]):a("label",[t._v(t._s(e[1].label)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]],expression:"localAttributes[attribute[0]]"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes,e[0],a.target.multiple?r:r[0])}}},t._l(e[1].allowed,(function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v(t._s(t.label(e)))])})),0)])],2)})),0),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical sticky top",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Close the editor"},on:{keyup:r,click:t.close}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Save the question"},on:{keyup:r,click:t.save}},[a("svg",{class:{mdi:!0,icon:!0,secondary:!t.hasChanges},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}})])])]),t.canMoveUp?a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move up"},on:{keyup:r,click:function(e){return t.moveQuestion(-1)}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])])]):a("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[a("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])]),t.canMoveDown?a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move down"},on:{keyup:r,click:function(e){return t.moveQuestion(1)}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])])]):a("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[a("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Delete"},on:{keyup:r,click:t.deleteQuestion}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])])]}}])})],1)])},Ot=[],jt=(a("a434"),a("3835")),wt=a("5530"),qt=a("4979"),Ct=a.n(qt),Pt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localAttributes={},t.errors={},t}return Object(o["a"])(a,[{key:"label",value:function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}},{key:"mounted",value:function(){var t=this;this.localAttributes=Ct()(this.$props.question.attributes),this.editableAttributes.forEach((function(e){t.localAttributes[e[0]]||"user"===e[1].source&&("booleanValue"===e[1].type?p["c"].set(t.localAttributes,e[0],!1):"listOfValues"===e[1].type?p["c"].set(t.localAttributes,e[0],[]):e[1].allowed&&e[1].allowed.length>0?p["c"].set(t.localAttributes,e[0],e[1].allowed[0]):p["c"].set(t.localAttributes,e[0],""))}))}},{key:"updateQuestion",value:function(){var t=this;this.localAttributes=Ct()(this.$props.question.attributes),this.editableAttributes.forEach((function(e){t.localAttributes[e[0]]||"user"===e[1].source&&("booleanValue"===e[1].type?p["c"].set(t.localAttributes,e[0],!1):"listOfValues"===e[1].type?p["c"].set(t.localAttributes,e[0],[]):e[1].allowed&&e[1].allowed.length>0?p["c"].set(t.localAttributes,e[0],e[1].allowed[0]):p["c"].set(t.localAttributes,e[0],""))}))}},{key:"save",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Ct()(this.$props.question),e.attributes=this.localAttributes,t.prev=2,this.errors={},t.next=6,this.$store.dispatch("updateQuestion",e);case 6:t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](2),a={},t.t0.forEach((function(t){var e=t.source.pointer.split("/");a[e[e.length-1]]=t.title})),this.errors=a;case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"close",value:function(){this.hasChanges?confirm("This will cause any changes to this question to be lost. Continue?")&&this.$emit("close"):this.$emit("close")}},{key:"moveQuestion",value:function(t){var e=this,a=Ct()(this.$store.state.pages[this.$props.question.relationships.page.data.id]),r=-1;if(a.relationships.questions.data.forEach((function(t,a){t.id===e.$props.question.id&&(r=a)})),-1!==r){var s=r+t;a.relationships.questions.data.splice(r,1),a.relationships.questions.data.splice(s,0,{type:"questions",id:this.$props.question.id}),this.$store.dispatch("updatePage",{page:a})}}},{key:"deleteQuestion",value:function(){confirm("Please confirm that you wish to delete this question?")&&this.$store.dispatch("deleteQuestion",this.$props.question)}},{key:"addListOfValuesValue",value:function(t){this.localAttributes[t].push("")}},{key:"setListOfValuesValue",value:function(t,e,a){p["c"].set(this.localAttributes[t],e,a)}},{key:"removeListOfValuesValue",value:function(t,e){this.localAttributes[t].splice(e,1)}},{key:"questionType",get:function(){return this.$store.state.questionTypes[this.$props.question.relationships["question-type"].data.id]}},{key:"editableAttributes",get:function(){return Object.entries(this.questionType.attributes).filter((function(t){return t[1]&&"user"===t[1].source}))}},{key:"attributes",get:function(){return Object(wt["a"])(Object(wt["a"])({},this.questionType.attributes),this.$props.question.attributes)}},{key:"hasChanges",get:function(){var t=this,e=!1;return this.editableAttributes.forEach((function(a){var r=Object(jt["a"])(a,2),s=r[0],i=r[1];if("user"===i.source)if("listOfValues"===i.type){var n=t.$props.question.attributes[s],o=t.localAttributes[s];n&&o&&n.length==o.length?n.filter((function(t){return o.indexOf(t)<0})).length>0&&(e=!0):e=!0}else t.$props.question.attributes[s]!==t.localAttributes[s]&&(e=!0)})),e}},{key:"canMoveUp",get:function(){var t=this.$store.state.pages[this.$props.question.relationships.page.data.id];return t.relationships.questions.data[0].id!==this.$props.question.id}},{key:"canMoveDown",get:function(){var t=this.$store.state.pages[this.$props.question.relationships.page.data.id];return t.relationships.questions.data[t.relationships.questions.data.length-1].id!==this.$props.question.id}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],Pt.prototype,"question",void 0),Object(c["a"])([Object(p["d"])("question")],Pt.prototype,"updateQuestion",null),Pt=Object(c["a"])([Object(p["a"])({components:{InputField:W,AriaMenubar:k}})],Pt);var Tt=Pt,$t=Tt,Et=Object(y["a"])($t,kt,Ot,!1,null,null,null),At=Et.exports,Vt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.editing=!1,t}return Object(o["a"])(a,[{key:"startEditing",value:function(){this.editing=!0}},{key:"endEditing",value:function(){this.editing=!1}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],Vt.prototype,"question",void 0),Vt=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,QuestionRenderer:_t,QuestionEditor:At}})],Vt);var Mt=Vt,Rt=Mt,Bt=Object(y["a"])(Rt,ht,vt,!1,null,null,null),St=Bt.exports,Ht=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.insertIdx=-1,t.insertPosition="",t}return Object(o["a"])(a,[{key:"insertQuestion",value:function(t,e){this.insertIdx=t,this.insertPosition=e}},{key:"page",get:function(){return this.$store.state.pages[this.$route.params.pid]}},{key:"isCurrentRoute",get:function(){return"page.edit"===this.$route.name}},{key:"questions",get:function(){var t=this;return this.page.relationships?this.page.relationships.questions.data.map((function(e){return t.$store.state.questions[e.id]})).filter((function(t){return t})):[]}},{key:"questionTypeGroups",get:function(){return this.$store.state.questionTypeGroups}}]),a}(p["c"]);Ht=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,AddQuestion:dt,QuestionBlock:St}})],Ht);var Lt=Ht,Ft=Lt,Ut=Object(y["a"])(Ft,st,it,!1,null,null,null),Nt=Ut.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button hollow primary small",on:{click:t.addTransition}},[t._v("Add a transition")])])])]),t._l(t.transitions,(function(t){return a("transition-editor",{key:t.id,attrs:{transition:t}})})),t.newTransition?a("transition-editor",{attrs:{transition:t.newTransition},on:{created:t.newTransitionCreated}}):t._e()],2)},Qt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.localTransition?a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},[a("label",[t._v("Transition to "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localTransition.relationships.target.data.id,expression:"localTransition.relationships.target.data.id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localTransition.relationships.target.data,"id",e.target.multiple?a:a[0])}}},[t._l(t.pages,(function(e){return[e.id!==t.localTransition.relationships.source.data.id?a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")]):t._e()]}))],2)])]),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical sticky top",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Save the transition"},on:{keyup:r,click:t.save}},[a("svg",{class:{mdi:!0,icon:!0,secondary:!t.hasChanges},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Delete"},on:{keyup:r,click:t.deleteTransition}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])])]}}],null,!1,4224831418)})],1)]):t._e()},Gt=[],Zt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localTransition=null,t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.localTransition=Ct()(this.$props.transition)}},{key:"updateTransition",value:function(){this.localTransition=Ct()(this.$props.transition)}},{key:"save",value:function(){if(this.localTransition)try{this.errors={},this.localTransition.id?this.$store.dispatch("updateTransition",this.localTransition):(this.$store.dispatch("createTransition",this.localTransition),this.$emit("created"))}catch(e){var t={};e.forEach((function(e){var a=e.source.pointer.split("/");t[a[a.length-1]]=e.title})),this.errors=t}}},{key:"deleteTransition",value:function(){this.localTransition&&(this.localTransition.id?confirm("Please confirm that you wish to delete this transition?")&&this.$store.dispatch("deleteTransition",this.localTransition):this.$emit("created"))}},{key:"pages",get:function(){return Object.values(this.$store.state.pages)}},{key:"hasChanges",get:function(){return!(!this.$props.transition||!this.localTransition)&&this.$props.transition.relationships.target.data.id!=this.localTransition.relationships.target.data.id}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],Zt.prototype,"transition",void 0),Object(c["a"])([Object(p["d"])("transition")],Zt.prototype,"updateTransition",null),Zt=Object(c["a"])([Object(p["a"])({components:{InputField:W,AriaMenubar:k}})],Zt);var Dt=Zt,Kt=Dt,Xt=Object(y["a"])(Kt,zt,Gt,!1,null,null,null),Jt=Xt.exports,Wt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.name="",t.title="",t.errors={},t.newTransition=null,t}return Object(o["a"])(a,[{key:"addTransition",value:function(){this.newTransition={type:"transitions",attributes:{},relationships:{source:{data:{type:"pages",id:this.page.id}},target:{data:{type:"pages",id:""}}}}}},{key:"newTransitionCreated",value:function(){this.newTransition=null}},{key:"page",get:function(){return this.$store.state.pages[this.$route.params.pid]}},{key:"transitions",get:function(){var t=this;return this.page&&this.page.relationships&&this.page.relationships.next?this.page.relationships.next.data.map((function(e){return t.$store.state.transitions[e.id]})).filter((function(t){return t})):[]}}]),a}(p["c"]);Wt=Object(c["a"])([Object(p["a"])({components:{TransitionEditor:Jt}})],Wt);var Yt=Wt,te=Yt,ee=Object(y["a"])(te,It,Qt,!1,null,null,null),ae=ee.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[this.page?a("form",{on:{submit:function(e){return e.preventDefault(),t.updatePage(e)}}},[a("input-field",{attrs:{type:"text",label:"Name",error:t.errors.name},model:{value:t.page.attributes.name,callback:function(e){t.$set(t.page.attributes,"name",e)},expression:"page.attributes.name"}}),a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.page.attributes.title,callback:function(e){t.$set(t.page.attributes,"title",e)},expression:"page.attributes.title"}}),t._m(0)],1):t._e()])},se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button primary"},[t._v("Update")])])])])}],ie=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.name="",t.title="",t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.errors={}}},{key:"watchPage",value:function(){this.errors={}}},{key:"updatePage",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.page){t.next=12;break}return t.prev=1,this.errors={},t.next=5,this.$store.dispatch("updatePage",this.page);case 5:t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](1),e={},t.t0.forEach((function(t){var a=t.source.pointer.split("/");e[a[a.length-1]]=t.title})),this.errors=e;case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"page",get:function(){return Ct()(this.$store.state.pages[this.$route.params.pid])}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("page")],ie.prototype,"watchPage",null),ie=Object(c["a"])([Object(p["a"])({components:{InputField:W}})],ie);var ne=ie,oe=ne,ue=Object(y["a"])(oe,re,se,!1,null,null,null),le=ue.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",[a("ul",{staticClass:"menu align-right"},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem","aria-label":"Reload results"},on:{click:t.reload}},[a("svg",{staticClass:"icon mdi",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",href:t.$store.state.config.experiment.downloadResultsUrl,target:"_blank","aria-label":"Download results"}},[a("svg",{staticClass:"icon mdi",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"}})])])])])]),a("ul",{staticClass:"no-bullet"},t._l(t.pages,(function(t){return a("li",{key:t.id,staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell"},[a("results-summary",{attrs:{page:t}})],1)])})),0)])},pe=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.questionResults?[a("h2",[t._v(t._s(t.page.attributes.name)+" ("+t._s(t.page.attributes.title)+")")]),t._l(t.questionResults,(function(t){var e=t[0],r=t[1];return a("question-results",{key:e.id,attrs:{question:e,results:r}})}))]:t._e()],2)},he=[],ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v(t._s(t.question.attributes.title))]),"USEFSingleLineInput"===t.renderType||"USEFMultiLineInput"===t.renderType||"USEFHidden"===t.renderType?a("div",[a("table",[a("tbody",t._l(t.results.attributes.responses[t.question.id],(function(e,r){var s=e[0],i=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s))]),a("td",[t._v(t._s(i))])])})),0)])]):"USEFSingleChoice"===t.renderType||"USEFMultiChoice"===t.renderType?a("div",[a("table",[a("tbody",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],s=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s))]),t.results.attributes.responses[t.question.id][r]?a("td",[t._v(t._s(t.results.attributes.responses[t.question.id][r]))]):a("td",[t._v("0")])])})),0)])]):"USEFSingleChoiceGrid"===t.renderType||"USEFMultiChoiceGrid"===t.renderType?a("div",t._l(t.zip(t.attributes.row_values,t.attributes.row_labels),(function(e){var r=e[0],s=e[1];return a("div",{key:r},[a("h4",[t._v(t._s(s))]),a("table",[a("tbody",t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var s=e[0],i=e[1];return a("tr",{key:s},[a("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t.results.attributes.responses[t.question.id][r][s]?a("td",[t._v(t._s(t.results.attributes.responses[t.question.id][r][s]))]):a("td",[t._v("0")])])})),0)])])})),0):"USEFInvalid"===t.renderType?a("p",[t._v("This question has an invalid question type and cannot be displayed.")]):t._e()])},fe=[],be=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"label",value:function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}},{key:"zip",value:function(t,e){return t.map((function(t,a){return a<e.length?[t,e[a]]:[t,t]}))}},{key:"questionType",get:function(){return this.$store.state.questionTypes[this.$props.question.relationships["question-type"].data.id]}},{key:"attributes",get:function(){var t=this,e={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(a){t.$props.question.attributes[a[0]]?e[a[0]]=t.$props.question.attributes[a[0]]:a[1]&&"user"===a[1].source?"booleanValue"===a[1].type?e[a[0]]=!1:"listOfValues"===a[1].type?e[a[0]]=[]:a[1].allowed&&a[1].allowed.length>0?e[a[0]]=a[1].allowed[0]:e[a[0]]="":e[a[0]]=null})),e}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes._core_type.indexOf("USEF")?this.questionType.attributes._core_type:"USEFInvalid"}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],be.prototype,"question",void 0),Object(c["a"])([Object(p["b"])()],be.prototype,"results",void 0),be=Object(c["a"])([p["a"]],be);var me=be,ge=me,ye=Object(y["a"])(ge,ve,fe,!1,null,null,null),xe=ye.exports,_e=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"questionResults",get:function(){var t=this;if(this.page){var e=this.page.relationships.questions.data.map((function(e){if(!t.$store.state.questions[e.id])return null;var a=t.$store.state.questions[e.id].relationships["question-type"].data.id;return t.$store.state.questionTypes[a]?"USEFDisplay"===t.$store.state.questionTypes[a].attributes["_core_type"]?null:t.$store.state.results[t.page.id]?[t.$store.state.questions[e.id],t.$store.state.results[t.page.id]]:void 0:null})).filter((function(t){return t}));return e.length>0?e:null}return null}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],_e.prototype,"page",void 0),_e=Object(c["a"])([Object(p["a"])({components:{QuestionResults:xe}})],_e);var ke=_e,Oe=ke,je=Object(y["a"])(Oe,de,he,!1,null,null,null),we=je.exports,qe=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"reload",value:function(){this.$store.dispatch("loadResults")}},{key:"flattenPages",value:function(t){var e=this,a=[t];return t.relationships.next&&t.relationships.next.data.forEach((function(t){var r=e.$store.state.transitions[t.id];if(r&&r.relationships.target){var s=e.$store.state.pages[r.relationships.target.data.id];s&&(a=a.concat(e.flattenPages(s)))}})),a}},{key:"experiment",get:function(){return this.$store.state.experiment}},{key:"firstPage",get:function(){return this.experiment&&this.experiment.relationships["first-page"]?this.$store.state.pages[this.experiment.relationships["first-page"].data.id]:null}},{key:"pages",get:function(){if(this.firstPage){var t=this.flattenPages(this.firstPage);return Object.values(this.$store.state.pages).forEach((function(e){var a=!1;t.forEach((function(t){e.id===t.id&&(a=!0)})),a||t.push(e)})),t}return Object.values(this.$store.state.pages)}}]),a}(p["c"]);qe=Object(c["a"])([Object(p["a"])({components:{ResultsSummary:we}})],qe);var Ce=qe,Pe=Ce,Te=Object(y["a"])(Pe,ce,pe,!1,null,null,null),$e=Te.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.localExperiment?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateExperiment(e)}}},[a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.localExperiment.attributes.title,callback:function(e){t.$set(t.localExperiment.attributes,"title",e)},expression:"localExperiment.attributes.title"}}),a("input-field",{attrs:{type:"textarea",label:"Description",error:t.errors.description},model:{value:t.localExperiment.attributes.description,callback:function(e){t.$set(t.localExperiment.attributes,"description",e)},expression:"localExperiment.attributes.description"}}),a("label",[t._v("First page "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localFirstPage.id,expression:"localFirstPage.id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localFirstPage,"id",e.target.multiple?a:a[0])}}},t._l(t.pages,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")])})),0)]),t._m(0)],1)])]):t._e()},Ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button primary"},[t._v("Update")])])])])}],Ve=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localExperiment=null,t.localFirstPage=null,t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.$store.state.experiment?(this.localExperiment=Ct()(this.$store.state.experiment),this.localExperiment&&this.localExperiment.relationships["first-page"]?this.localFirstPage=Ct()(this.localExperiment.relationships["first-page"].data):this.localFirstPage={type:"pages",id:""}):(this.localExperiment=null,this.localFirstPage=null)}},{key:"watchExperiment",value:function(){this.$store.state.experiment?(this.localExperiment=Ct()(this.$store.state.experiment),this.localExperiment&&this.localExperiment.relationships["first-page"]?this.localFirstPage=Ct()(this.localExperiment.relationships["first-page"].data):this.localFirstPage={type:"pages",id:""}):(this.localExperiment=null,this.localFirstPage=null)}},{key:"updateExperiment",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.localExperiment){t.next=14;break}return t.prev=1,this.errors={},e=Ct()(this.localExperiment),e.relationships["first-page"]?e.relationships["first-page"].data=Ct()(this.localFirstPage):e.relationships["first-page"]={data:Ct()(this.localFirstPage)},t.next=7,this.$store.dispatch("updateExperiment",e);case 7:t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),a={},t.t0.forEach((function(t){var e=t.source.pointer.split("/");a[e[e.length-1]]=t.title})),this.errors=a;case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"pages",get:function(){var t=this;return this.localExperiment?this.localExperiment.relationships.pages.data.map((function(e){return t.$store.state.pages[e.id]?t.$store.state.pages[e.id]:null})).filter((function(t){return t})):[]}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("experiment")],Ve.prototype,"watchExperiment",null),Ve=Object(c["a"])([Object(p["a"])({components:{InputField:W}})],Ve);var Me=Ve,Re=Me,Be=Object(y["a"])(Re,Ee,Ae,!1,null,null,null),Se=Be.exports;r["a"].use(P["a"]);var He=[{path:"/",name:"overview",component:R},{path:"/pages",name:"pages",component:I,children:[{path:"create",name:"page.create",component:rt},{path:":pid",name:"page.edit",component:Nt,children:[{path:"transitions",name:"page.transitions",component:ae},{path:"settings",name:"page.settings",component:le}]}]},{path:"/results",name:"results",component:$e},{path:"/settings",name:"settings",component:Se}],Le=new P["a"]({mode:"hash",base:"/static/experiment-editor/",routes:He}),Fe=Le,Ue=(a("d3b7"),a("3ca3"),a("ddb0"),a("2f62")),Ne=a("bc3a"),Ie=a.n(Ne);r["a"].use(Ue["a"]);var Qe=new Ue["a"].Store({state:{config:{api:{baseUrl:"",csrfToken:""},experiment:{id:"",externalUrl:"",downloadResultsUrl:""}},experiment:null,pages:{},transitions:{},questionTypeGroups:[],questionTypes:{},questions:{},results:{},ui:{busy:!1,busyCounter:0,busyMaxCounter:0}},mutations:{setConfig:function(t,e){t.config=e},setBusy:function(t,e){e?(t.ui.busyCounter=t.ui.busyCounter+1,t.ui.busyMaxCounter=t.ui.busyMaxCounter+1):(t.ui.busyCounter=t.ui.busyCounter-1,0===t.ui.busyCounter&&setTimeout((function(){t.ui.busyMaxCounter=0}),400)),t.ui.busy=t.ui.busyCounter>0},setQuestionTypeGroups:function(t,e){r["a"].set(t,"questionTypeGroups",e)},setQuestionType:function(t,e){r["a"].set(t.questionTypes,e.id,e)},setExperiment:function(t,e){r["a"].set(t,"experiment",e)},setPage:function(t,e){if(r["a"].set(t.pages,e.id,e),t.experiment){t.experiment.relationships||(t.experiment.relationships={pages:{data:[]}}),t.experiment.relationships.pages||(t.experiment.relationships.pages={data:[]});for(var a=!1,s=0;s<t.experiment.relationships.pages.data.length;s++){var i=t.experiment.relationships.pages.data[s];if(i.id===e.id){a=!0,t.experiment.relationships.pages.data[s]={type:e.type,id:e.id};break}}a||t.experiment.relationships.pages.data.push({type:e.type,id:e.id})}},deletePage:function(t,e){r["a"].delete(t.pages,e.id)},setTransition:function(t,e){e.id&&r["a"].set(t.transitions,e.id,e)},setQuestion:function(t,e){r["a"].set(t.questions,e.id,e)},deleteQuestion:function(t,e){r["a"].delete(t.questions,e.id)},setResult:function(t,e){r["a"].set(t.results,e.id,e)}},actions:{init:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,r("setConfig",e),a.prev=2,r("setBusy",!0),a.next=6,Promise.all([s("loadQuestionTypes"),s("loadExperiment")]);case 6:return r("setBusy",!1),a.abrupt("return",Promise.resolve());case 10:return a.prev=10,a.t0=a["catch"](2),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},loadQuestionTypes:function(t){return Object(H["a"])(regeneratorRuntime.mark((function e(){var a,r,s,i,n,o,u,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,r=t.commit,s=t.state,e.prev=1,r("setBusy",!0),e.next=5,Ie.a.get(s.config.api.baseUrl+"/question_type_groups");case 5:for(i=e.sent,n=i.data.data,r("setQuestionTypeGroups",n),o=[],u=0;u<n.length;u++)for(l=n[u],c=0;c<l.relationships["question-types"].data.length;c++)o.push(a("loadQuestionType",l.relationships["question-types"].data[c].id));return e.next=12,Promise.all(o);case 12:return r("setBusy",!1),e.abrupt("return",Promise.resolve());case 16:return e.prev=16,e.t0=e["catch"](1),r("setBusy",!1),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))()},loadQuestionType:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie.a.get(s.config.api.baseUrl+"/question_types/"+e);case 5:return i=a.sent,r("setQuestionType",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!0),a.abrupt("return",Promise.reject(a.t0));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},loadExperiment:function(t){return Object(H["a"])(regeneratorRuntime.mark((function e(){var a,r,s,i,n,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=t.dispatch,s=t.state,a("setBusy",!0),e.prev=2,e.next=5,Ie.a.get(s.config.api.baseUrl+"/experiments/"+s.config.experiment.id);case 5:for(i=e.sent,n=i.data.data,a("setExperiment",n),o=[],u=0;u<n.relationships.pages.data.length;u++)o.push(r("loadPage",n.relationships.pages.data[u].id));return e.next=12,Promise.all(o);case 12:return a("setBusy",!1),e.abrupt("return",Promise.resolve(n));case 16:return e.prev=16,e.t0=e["catch"](2),a("setBusy",!1),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,16]])})))()},loadPage:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o,u,l,c,p,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,i=t.state,r("setBusy",!0),a.prev=2,a.next=5,Ie.a.get(i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/pages/"+e);case 5:for(n=a.sent,o=null,i.pages[e]&&(o=i.pages[e].relationships.questions.data.map((function(t){return t.id}))),u=n.data.data,r("setPage",u),l=[],c=0;c<u.relationships.next.data.length;c++)l.push(s("loadTransition",u.relationships.next.data[c].id));for(p=[],d=0;d<u.relationships.questions.data.length;d++)p.push(u.relationships.questions.data[d].id),l.push(s("loadQuestion",{pageId:e,questionId:u.relationships.questions.data[d].id}));return a.next=16,Promise.all(l);case 16:return o&&o.forEach((function(t){p.indexOf(t)<0&&r("deleteQuestion",i.questions[t])})),s("loadResult",u.id),r("setBusy",!1),a.abrupt("return",Promise.resolve(u));case 22:return a.prev=22,a.t0=a["catch"](2),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0));case 26:case"end":return a.stop()}}),a,null,[[2,22]])})))()},loadTransition:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie.a.get(s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/transitions/"+e);case 5:return i=a.sent,r("setTransition",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},loadQuestion:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie.a.get(s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/pages/"+e.pageId+"/questions/"+e.questionId);case 5:return i=a.sent,r("setQuestion",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},loadResults:function(t){return Object(H["a"])(regeneratorRuntime.mark((function e(){var a,r,s,i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=t.commit,r=t.dispatch,s=t.state,e.prev=1,a("setBusy",!0),i=[],n=Object.values(s.pages),o=0;o<n.length;o++)i.push(r("loadResult",n[o].id));return e.next=8,Promise.all(i);case 8:return a("setBusy",!1),e.abrupt("return",Promise.resolve());case 12:return e.prev=12,e.t0=e["catch"](1),a("setBusy",!1),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},loadResult:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie.a.get(s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/results/"+e);case 5:return i=a.sent,r("setResult",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},updateExperiment:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"patch",url:s.config.api.baseUrl+"/experiments/"+e.id,data:{data:e},headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 5:return i=a.sent,r("setExperiment",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},createPage:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,i=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"post",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/pages",data:{data:{type:"pages",attributes:{name:e.name,title:e.title}}},headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:if(n=a.sent,o=n.data.data,r("setPage",o),"first"!==e.mode){a.next=16;break}u=Ct()(i.experiment),u.relationships||(u.relationships={}),u.relationships["first-page"]||(u.relationships["first-page"]={data:{}}),u.relationships["first-page"].data={type:"pages",id:o.id},s("updateExperiment",u),a.next=22;break;case 16:return s("updateExperiment",i.experiment),a.next=19,Ie()({method:"post",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/transitions",data:{data:{type:"transitions",attributes:{},relationships:{source:{data:{type:"pages",id:e.parentPageId}},target:{data:{type:"pages",id:o.id}}}}},headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 19:n=a.sent,r("setTransition",n.data.data),s("loadPage",e.parentPageId);case 22:return r("setBusy",!1),a.abrupt("return",Promise.resolve(o));case 26:return a.prev=26,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 30:case"end":return a.stop()}}),a,null,[[1,26]])})))()},updatePage:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"patch",url:s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/pages/"+e.id,data:{data:e},headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 5:return i=a.sent,r("setPage",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},deletePage:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,i=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"delete",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/pages/"+e.id,headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:return r("deletePage",e),s("loadExperiment"),r("setBusy",!1),a.abrupt("return",Promise.resolve());case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},addQuestion:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,i=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"post",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/pages/"+e.page.id+"/questions",data:{data:{type:"questions",attributes:{},relationships:{"question-type":{data:{type:"question-types",id:e.questionType.id}}}}},headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:return n=a.sent,o=n.data.data,u=Ct()(e.page),r("setQuestion",o),-1===e.idx?u.relationships.questions.data.push({type:"questions",id:o.id}):u.relationships.questions.data.splice(e.idx,0,{type:"questions",id:o.id}),a.next=12,s("updatePage",u);case 12:return r("setBusy",!1),a.abrupt("return",Promise.resolve(o));case 16:return a.prev=16,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 20:case"end":return a.stop()}}),a,null,[[1,16]])})))()},updateQuestion:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"patch",url:s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/pages/"+e.relationships.page.data.id+"/questions/"+e.id,data:{data:e},headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 5:return i=a.sent,r("setQuestion",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},deleteQuestion:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.dispatch,i=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"delete",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/pages/"+e.relationships.page.data.id+"/questions/"+e.id,headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:return s("loadPage",e.relationships.page.data.id),r("setBusy",!1),a.abrupt("return",Promise.resolve());case 10:return a.prev=10,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))()},createTransition:function(t,e){var a=this;return Object(H["a"])(regeneratorRuntime.mark((function r(){var s,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,i=t.state,r.prev=1,s("setBusy",!0),r.next=5,Ie()({method:"post",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/transitions",data:{data:e},headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:return n=r.sent,s("setTransition",n.data.data),a.dispatch("loadPage",n.data.data.relationships.source.data.id),a.dispatch("loadPage",n.data.data.relationships.target.data.id),s("setBusy",!1),r.abrupt("return",Promise.resolve(n.data.data));case 13:return r.prev=13,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0.response.data.errors));case 17:case"end":return r.stop()}}),r,null,[[1,13]])})))()},updateTransition:function(t,e){return Object(H["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,s=t.state,a.prev=1,r("setBusy",!0),a.next=5,Ie()({method:"patch",url:s.config.api.baseUrl+"/experiments/"+s.config.experiment.id+"/transitions/"+e.id,data:{data:e},headers:{"X-CSRF-TOKEN":s.config.api.csrfToken}});case 5:return i=a.sent,r("setTransition",i.data.data),r("setBusy",!1),a.abrupt("return",Promise.resolve(i.data.data));case 11:return a.prev=11,a.t0=a["catch"](1),r("setBusy",!1),a.abrupt("return",Promise.reject(a.t0.response.data.errors));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},deleteTransition:function(t,e){var a=this;return Object(H["a"])(regeneratorRuntime.mark((function r(){var s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,i=t.state,r.prev=1,s("setBusy",!0),r.next=5,Ie()({method:"delete",url:i.config.api.baseUrl+"/experiments/"+i.config.experiment.id+"/transitions/"+e.id,headers:{"X-CSRF-TOKEN":i.config.api.csrfToken}});case 5:return a.dispatch("loadPage",e.relationships.source.data.id),a.dispatch("loadPage",e.relationships.target.data.id),s("setBusy",!1),r.abrupt("return",Promise.resolve());case 11:return r.prev=11,r.t0=r["catch"](1),s("setBusy",!1),r.abrupt("return",Promise.reject(r.t0.response.data.errors));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()}},modules:{}});r["a"].config.productionTip=!1,new r["a"]({router:Fe,store:Qe,render:function(t){return t(C)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map