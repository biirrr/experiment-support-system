(function(t){function e(e){for(var r,n,o=e[0],u=e[1],l=e[2],p=0,d=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var u=a[o];0!==i[u]&&(r=!1)}r&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},i={app:0},s=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/experiment-editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},1:function(t,e){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"experiment-editor",attrs:{id:"app"}},[t.progress>=0?a("div",{staticClass:"busy"},[a("progress",{attrs:{max:"100"},domProps:{value:t.progress}}),t.$store.state.ui.busy?a("div",{staticClass:"busy-overlay"}):t._e()]):t._e(),t.experiment?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h1",[t._v(t._s(t.experiment.attributes.title))])]),a("div",{staticClass:"cell shrink"},[a("nav",[a("ul",{staticClass:"menu"},[a("li",[a("a",{attrs:{href:t.$store.state.config.experiment.externalUrl,target:"_blank",rel:"noopener"}},["development"===t.experiment.attributes.status?[t._v(" Test the Experiment ")]:"live"===t.experiment.attributes.status?[t._v(" "+t._s(t.$store.state.config.experiment.externalUrl)+" ")]:t._e()],2)]),"completed"!==t.experiment.attributes.status?a("li",[a("select",{on:{change:function(e){return t.changeStatus(e)}}},["development"===t.experiment.attributes.status?[a("option",{attrs:{value:"development",selected:"selected"}},[t._v("Development")]),a("option",{attrs:{value:"live"}},[t._v("Live")])]:[a("option",{attrs:{value:"live"},domProps:{selected:"live"===t.experiment.attributes.status?"selected":null}},[t._v("Live")]),a("option",{attrs:{value:"paused"},domProps:{selected:"paused"===t.experiment.attributes.status?"selected":null}},[t._v("Pause")]),a("option",{attrs:{value:"completed"},domProps:{selected:"completed"===t.experiment.attributes.status?"selected":null}},[t._v("Complete")])]],2)]):t._e()])])])]):t._e(),a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("nav",{staticClass:"margin-bottom"},[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=(e.isActive,e.isExactActive);return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Overview")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Pages")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/results"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Results")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/settings"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"-1",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Settings")])])]}}],null,!0)})],1)])]}}])}),t.experiment?a("router-view"):t._e()],1)},s=[],n=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),c=a("9ab4"),p=a("60a3"),d=a("4979"),h=a.n(d),v=a("b85c"),f=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"render",value:function(){if(this.$scopedSlots.default)return this.$scopedSlots.default({keyboardNav:this.keyboardNavigation,mouseClickNav:this.mouseClickNavigation})}},{key:"keyboardNavigation",value:function(t){var e=t.target;if(e)if(39===t.keyCode){var a=this.findNextMenuitem(this.getParentMenubar(e),e,"next");a&&a.focus()}else if(37===t.keyCode){var r=this.findNextMenuitem(this.getParentMenubar(e),e,"previous");r&&r.focus()}else if(38===t.keyCode||40===t.keyCode){if(e.parentElement&&e.parentElement.children){var i,s=Object(v["a"])(e.parentElement.children);try{for(s.s();!(i=s.n()).done;){var n=i.value;if("menu"===n.getAttribute("role")){n.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var o=this.findNextMenuitem(n,null,"next");o&&o.focus()}}}catch(d){s.e(d)}finally{s.f()}}}else if((13===t.keyCode||32==t.keyCode)&&e.parentElement&&e.parentElement.children){var u,l=Object(v["a"])(e.parentElement.children);try{for(l.s();!(u=l.n()).done;){var c=u.value;if("menu"===c.getAttribute("role"))if("false"===c.getAttribute("aria-hidden"))c.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false");else{c.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var p=this.findNextMenuitem(c,null,"next");if(p)return void p.focus()}}}catch(d){l.e(d)}finally{l.f()}e.click()}}},{key:"mouseClickNavigation",value:function(t){var e=t.target;if(e&&e.parentElement&&e.parentElement.children){var a,r=Object(v["a"])(e.parentElement.children);try{for(r.s();!(a=r.n()).done;){var i=a.value;if("menu"===i.getAttribute("role"))if("false"===i.getAttribute("aria-hidden"))i.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false");else{i.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true");var s=this.findNextMenuitem(i,null,"next");if(s)return void s.focus()}}}catch(n){r.e(n)}finally{r.f()}}}},{key:"getParentMenubar",value:function(t){return t?"menubar"===t.getAttribute("role")?t:this.getParentMenubar(t.parentElement):null}},{key:"findNextMenuitem",value:function(t,e,a){if(!t)return null;var r=[];if("next"===a)for(var i=t.children.length-1;i>=0;i--)r.push(t.children[i]);else for(var s=0;s<t.children.length;s++)r.push(t.children[s]);var n=0;e||(n=1);while(r.length>0){var o=r.pop();if(0===n&&o===e)n=1;else if(1===n&&"menuitem"===o.getAttribute("role")&&"true"!==o.getAttribute("aria-disabled"))return o;if("menu"!==o.getAttribute("role"))if("next"===a)for(var u=o.children.length-1;u>=0;u--)r.push(o.children[u]);else for(var l=0;l<o.children.length;l++)r.push(o.children[l])}return null}}]),a}(p["c"]);f=Object(c["a"])([Object(p["a"])({})],f);var b,m,g=f,y=g,x=a("2877"),_=Object(x["a"])(y,b,m,!1,null,null,null),k=_.exports,O=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"mounted",value:function(){var t=document.getElementById("ExperimentEditorConfig");if(t){var e=JSON.parse(t.innerHTML);e&&this.$store.dispatch("init",e)}}},{key:"changeStatus",value:function(t){var e=this;if(t&&t.target&&this.experiment){var a=t.target.value,r=!1;if("development"===this.experiment.attributes.status&&"live"===a?r=confirm("Switching the status to live makes the experiment publicly available. You cannot return to the development status. Please confirm you wish to make the experiment live."):"live"===this.experiment.attributes.status&&"paused"===a||"paused"===this.experiment.attributes.status&&"live"===a?r=!0:"live"!==this.experiment.attributes.status&&"paused"!==this.experiment.attributes.status||"completed"!==a||(r=confirm("Switching the status to completed ends the experiment. You cannot return to the live status. Please confirm you wish to complete the experiment.")),r){var i=h()(this.experiment);i.attributes.status=a,this.$store.dispatch("saveExperiment",i)}else{var s=this.experiment.attributes.status;this.experiment.attributes.status="",this.$nextTick((function(){e.experiment&&(e.experiment.attributes.status=s)}))}}}},{key:"experiment",get:function(){return this.$store.getters.experiment}},{key:"progress",get:function(){return this.$store.state.ui.busyMaxCounter>0?100/this.$store.state.ui.busyMaxCounter*(this.$store.state.ui.busyMaxCounter-this.$store.state.ui.busyCounter):-1}}]),a}(p["c"]);O=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k}})],O);var j=O,w=j,C=Object(x["a"])(w,i,s,!1,null,null,null),S=C.exports,q=a("8c4f"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v(t._s(t.experiment.attributes.description))]),a("table",{staticStyle:{"max-width":"20rem"}},[a("tbody",[a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Participants")]),a("td",[t._v(t._s(t.experiment.attributes._stats.participants.started))])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Completed")]),a("td",[t._v(t._s(t.experiment.attributes._stats.participants.completed)),t.experiment.attributes._stats.participants.started>0?[t._v(" ("+t._s(Math.round(100/t.experiment.attributes._stats.participants.started*t.experiment.attributes._stats.participants.completed))+"%)")]:t._e()],2)])])])])},A=[],E=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"experiment",get:function(){return this.$store.getters.experiment}}]),a}(p["c"]);E=Object(c["a"])([p["a"]],E);var P=E,T=P,V=Object(x["a"])(T,$,A,!1,null,null,null),M=V.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isCurrentRoute?a("div",[a("nav",[a("ul",{staticClass:"menu align-right"},[a("router-link",{attrs:{to:"/pages/create"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.href,i=e.navigate;return[a("li",{attrs:{role:"presentation"}},[a("a",{staticClass:"button hollow small primary",attrs:{href:r},on:{click:i}},[t._v("Add a page")])])]}}],null,!1,2922356803)})],1)]),a("ul",{staticClass:"no-bullet"},t._l(t.pages,(function(e){return a("li",{key:e.id,staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h2",[a("router-link",{attrs:{to:"/pages/"+e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")])],1),a("ul",{staticClass:"menu"},[0===e.relationships.next.data.length?a("li",{staticClass:"menu-text"},[t._v("End of Experiment")]):[a("li",{staticClass:"menu-text"},[t._v("Transition to")]),t._l(e.relationships.next.data,(function(e){return[t.pageForTransitionId(e.id)?[a("router-link",{key:e.id,attrs:{to:"/pages/"+t.pageForTransitionId(e.id).id},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.href,s=r.navigate;return[a("li",[a("a",{attrs:{href:i},on:{click:s}},[t._v(t._s(t.pageForTransitionId(e.id).attributes.name))])])]}}],null,!0)})]:t._e()]}))]],2)]),a("div",{staticClass:"cell shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var i=r.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/pages/"+e.id},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.href,r=t.navigate;return[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Edit this page",href:e},on:{keyup:i,click:r}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])])])]}}],null,!0)}),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Delete this page"},on:{keyup:i,click:function(a){return t.deletePage(e)}}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])],1)]}}],null,!0)})],1)])})),0)]):a("router-view")},R=[],L=(a("99af"),a("4160"),a("b0c0"),a("07ac"),a("159b"),a("96cf"),a("1da1")),U=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"pageForTransitionId",value:function(t){if(this.$store.state.dataStore.data.transitions){var e=this.$store.state.dataStore.data.transitions[t];if(e)return this.$store.state.dataStore.data.pages[e.relationships.target.data.id]}return null}},{key:"deletePage",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm('Please confirm that you wish to delete the page "'+e.attributes.name+'"?')){t.next=3;break}return t.next=3,this.$store.dispatch("deletePage",e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"flattenPages",value:function(t){var e=this,a=[t];return t.relationships.next&&t.relationships.next.data.forEach((function(t){var r=e.$store.state.dataStore.data.transitions[t.id];if(r&&r.relationships.target){var i=e.$store.state.dataStore.data.pages[r.relationships.target.data.id];i&&(a=a.concat(e.flattenPages(i)))}})),a}},{key:"experiment",get:function(){return this.$store.getters.experiment}},{key:"firstPage",get:function(){return this.experiment&&this.experiment.relationships["first-page"]&&this.$store.state.dataStore.data.pages?this.$store.state.dataStore.data.pages[this.experiment.relationships["first-page"].data.id]:null}},{key:"pages",get:function(){if(this.firstPage&&this.$store.state.dataStore.transitions){var t=this.flattenPages(this.firstPage);return Object.values(this.$store.state.dataStore.data.pages).forEach((function(e){var a=!1;t.forEach((function(t){e.id===t.id&&(a=!0)})),a||t.push(e)})),t}return this.$store.state.dataStore.data.pages?Object.values(this.$store.state.dataStore.data.pages):[]}},{key:"isCurrentRoute",get:function(){return"pages"===this.$route.name}}]),a}(p["c"]);U=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k}})],U);var N=U,Q=N,F=Object(x["a"])(Q,H,R,!1,null,null,null),I=F.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[a("h2",[t._v("Add a new page")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createPage(e)}}},[a("input-field",{attrs:{type:"text",label:"Name",error:t.errors.name},model:{value:t.pageName,callback:function(e){t.pageName=e},expression:"pageName"}}),a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.pageTitle,callback:function(e){t.pageTitle=e},expression:"pageTitle"}}),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addMode,expression:"addMode"}],attrs:{type:"radio",name:"parent",value:"first"},domProps:{checked:t._q(t.addMode,"first")},on:{change:function(e){t.addMode="first"}}}),t._v(" Add as the first page ")]),t.hasPages?[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addMode,expression:"addMode"}],attrs:{type:"radio",name:"parent",value:"after"},domProps:{checked:t._q(t.addMode,"after")},on:{change:function(e){t.addMode="after"}}}),t._v(" Add after ")]),"after"===t.addMode?a("label",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.parentPageId,expression:"parentPageId"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.parentPageId=e.target.multiple?a:a[0]}}},t._l(t.pages,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.title))])})),0)]):t._e()]:t._e(),a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("router-link",{staticClass:"button secondary",attrs:{to:"/pages"}},[t._v("Don't add")])],1),t._m(0)])])],2)])])},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("button",{staticClass:"button primary"},[t._v("Add")])])}],Z=a("bd0f"),z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{class:t.error?"is-invalid-label":""},[t.labelBefore?[t._v(t._s(t.label))]:t._e(),"textarea"===t.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",domProps:{value:t.localValue},on:{input:function(e){e.target.composing||(t.localValue=e.target.value)}}}):"checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localValue)?t._i(t.localValue,null)>-1:t.localValue},on:{change:function(e){var a=t.localValue,r=e.target,i=!!r.checked;if(Array.isArray(a)){var s=null,n=t._i(a,s);r.checked?n<0&&(t.localValue=a.concat([s])):n>-1&&(t.localValue=a.slice(0,n).concat(a.slice(n+1)))}else t.localValue=i}}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:"radio"},domProps:{checked:t._q(t.localValue,null)},on:{change:function(e){t.localValue=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],class:t.error?"is-invalid-input":"",attrs:{type:t.type},domProps:{value:t.localValue},on:{input:function(e){e.target.composing||(t.localValue=e.target.value)}}}),t.labelBefore?t._e():[t._v(t._s(t.label))],t.error?a("span",{staticClass:"form-error is-visible"},[t._v(t._s(t.error))]):t._e()],2)])},G=[],J=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localValue="",t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.localValue=this.$props.value}},{key:"updatedValue",value:function(t){this.localValue=t}},{key:"updateLocalValue",value:function(t){t!==this.$props.value&&this.$emit("input",t)}},{key:"labelBefore",get:function(){return"radio"!=this.$props.type&&"checkbox"!=this.$props.type}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],J.prototype,"type",void 0),Object(c["a"])([Object(p["b"])()],J.prototype,"value",void 0),Object(c["a"])([Object(p["b"])()],J.prototype,"label",void 0),Object(c["a"])([Object(p["b"])()],J.prototype,"error",void 0),Object(c["a"])([Object(p["d"])("value")],J.prototype,"updatedValue",null),Object(c["a"])([Object(p["d"])("localValue")],J.prototype,"updateLocalValue",null),J=Object(c["a"])([p["a"]],J);var Y=J,K=Y,W=Object(x["a"])(K,z,G,!1,null,null,null),X=W.exports,tt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.addMode="first",t.pageName="",t.pageTitle="",t.parentPageId="",t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){if(this.hasPages){this.addMode="after",this.parentPageId=this.pages[0].id;for(var t=0;t<this.pages.length;t++)if(0===this.pages[t].relationships.next.data.length){this.parentPageId=this.pages[t].id;break}}}},{key:"updateAddMode",value:function(){if(this.hasPages){this.addMode="after",this.parentPageId=this.pages[0].id;for(var t=0;t<this.pages.length;t++)if(0===this.pages[t].relationships.next.data.length){this.parentPageId=this.pages[t].id;break}}else this.addMode="first"}},{key:"createPage",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.addMode,a=this.parentPageId,t.next=5,this.$store.dispatch("createPage",{type:"pages",attributes:{name:this.pageName,title:this.pageTitle},relationships:{experiment:{data:{type:"experiments",id:this.$store.getters.experiment.id}}}});case 5:if(r=t.sent,"first"!==e){t.next=13;break}return i=h()(this.$store.getters.experiment),i.relationships.firstPage?i.relationships.firstPage.data.id=r.id:i.relationships["first-page"]={data:{type:"pages",id:r.id}},t.next=11,this.$store.dispatch("saveExperiment",i);case 11:t.next=15;break;case 13:return t.next=15,this.$store.dispatch("createTransition",{type:"transitions",attributes:{},relationships:{source:{data:{type:"pages",id:a}},target:{data:{type:"pages",id:r.id}}}});case 15:this.$router.push("/pages/"+r.id),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),this.errors=Object(Z["errorsToDict"])(t.t0);case 21:case"end":return t.stop()}}),t,this,[[0,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"pages",get:function(){return this.$store.state.dataStore.data.pages?Object.values(this.$store.state.dataStore.data.pages):[]}},{key:"hasPages",get:function(){return this.pages&&this.pages.length>0}},{key:"showPageSelect",get:function(){return this.hasPages&&"after"===this.addMode}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("pages")],tt.prototype,"updateAddMode",null),tt=Object(c["a"])([Object(p["a"])({components:{InputField:X}})],tt);var et=tt,at=et,rt=Object(x["a"])(at,B,D,!1,null,null,null),it=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.page?a("div",{staticClass:"grid-x grid-padding-x page-editor"},[a("div",{staticClass:"cell auto"},[a("h2",[t._v(t._s(t.page.attributes.title))]),a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-3"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/pages/"+t.page.id},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isExactActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Edit")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages/"+t.page.id+"/transitions"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Transitions")])])]}}],null,!0)}),a("router-link",{attrs:{to:"/pages/"+t.page.id+"/settings"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem"},on:{keyup:r,click:s}},[t._v("Settings")])])]}}],null,!0)})],1)]}}],null,!1,110653490)})],1),t.isCurrentRoute?a("div",{staticClass:"cell large-9"},[0===t.questions.length?a("add-question",{attrs:{page:t.page,idx:-1}}):a("ol",{staticClass:"no-bullet"},t._l(t.questions,(function(e,r){return a("li",{key:e.id,staticClass:"question"},[t.insertIdx===r&&"before"===t.insertPosition?a("add-question",{attrs:{page:t.page,idx:r,canCancel:!0},on:{close:function(e){return t.insertQuestion(-1,"")}}}):a("div",{staticClass:"insert-link"},[a("a",{attrs:{"aria-label":"Insert a question before this question",title:"Insert a question before this question"},on:{click:function(e){return t.insertQuestion(r,"before")}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])]),a("question-block",{attrs:{page:t.page,question:e}}),t.insertIdx===r&&"after"===t.insertPosition?a("add-question",{attrs:{page:t.page,idx:r+1,canCancel:!0},on:{close:function(e){return t.insertQuestion(-1,"")}}}):a("div",{staticClass:"insert-link"},[a("a",{attrs:{"aria-label":"Insert a question after this question",title:"Insert a question after this question"},on:{click:function(e){return t.insertQuestion(r,"after")}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])])],1)})),0)],1):t._e(),t.isCurrentRoute?t._e():a("div",{staticClass:"cell large-9"},[a("router-view")],1)])])]):t._e()},nt=[],ot=(a("4de4"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("ul",{staticClass:"vertical menu accordion-menu",attrs:{"data-accordion-menu":""}},[t._l(t.menuStructure,(function(e){return[e.questionTypes.length>0?a("li",{key:e.id,staticClass:"is-accordion-submenu-parent",attrs:{"aria-expanded":t.activeGroup===e.id?"true":"false"}},[a("a",{on:{click:function(a){return t.setActiveGroup(e.id)}}},[t._v(t._s(e.title))]),t.activeGroup===e.id?a("ul",{staticClass:"vertical menu nested is-accordion-submenu"},t._l(e.questionTypes,(function(e){return a("li",{key:e.id},[e?a("a",{on:{click:function(a){return t.addQuestion(e)}}},[t._v(t._s(e.attributes.label))]):t._e()])})),0):t._e()]):t._e()]}))],2),t.canCancel?a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("a",{staticClass:"button secondary small",on:{click:function(e){return t.$emit("close")}}},[t._v("Don't add")])])])]):t._e()])}),ut=[],lt=(a("a434"),function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.activeGroup="-1",t}return Object(o["a"])(a,[{key:"mounted",value:function(){1===this.menuStructure.length&&(this.activeGroup=this.menuStructure[0].id)}},{key:"setActiveGroup",value:function(t){this.activeGroup===t?this.activeGroup="-1":this.activeGroup=t}},{key:"addQuestion",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("createQuestion",{type:"questions",attributes:{},relationships:{page:{data:{type:"pages",id:this.page.id}},"question-type":{data:{type:"question-types",id:e.id}}}});case 3:return a=t.sent,this.$emit("close"),r=h()(this.page),r.relationships.questions?r.relationships.questions.data.splice(this.idx,0,{type:"questions",id:a.id}):r.relationships.questions={data:[{data:"questions",id:a.id}]},t.next=9,this.$store.dispatch("savePage",r);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.$emit("close");case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"menuStructure",get:function(){var t=this;return this.$store.state.dataStore.data["question-type-groups"]&&this.$store.state.dataStore.data["question-types"]?Object.values(this.$store.state.dataStore.data["question-type-groups"]).filter((function(t){return t.attributes["enabled"]})).map((function(e){return{id:e.id,title:e.attributes.title,questionTypes:e.relationships["question-types"].data.map((function(e){return t.$store.state.dataStore.data["question-types"][e.id]})).filter((function(t){return t&&t.attributes["essEnabled"]}))}})):[]}}]),a}(p["c"]));Object(c["a"])([Object(p["b"])()],lt.prototype,"page",void 0),Object(c["a"])([Object(p["b"])()],lt.prototype,"idx",void 0),Object(c["a"])([Object(p["b"])({default:!1})],lt.prototype,"canCancel",void 0),lt=Object(c["a"])([p["a"]],lt);var ct=lt,pt=ct,dt=Object(x["a"])(pt,ot,ut,!1,null,null,null),ht=dt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.editing?a("question-editor",{attrs:{page:t.page,question:t.question},on:{close:t.endEditing}}):a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},[a("question-renderer",{attrs:{question:t.question}})],1),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Edit"},on:{keyup:r,click:t.startEditing}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])])])])]}}])})],1)])},ft=[],bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.questionType?a("section",{class:"question question-type-"+t.questionType.attributes["_name"],attrs:{id:"question-"+t.question.id}},[t.attributes.title?a("h2",{class:t.attributes.required?"required":""},[t._v(t._s(t.attributes.title))]):t._e(),"USEFDisplay"===t.renderType?a("div",{domProps:{innerHTML:t._s(t.attributes.content)}}):"USEFSingleLineInput"===t.renderType?a("div",[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"text"}})])]):"USEFMultiLineInput"===t.renderType?a("div",[a("label",[a("textarea",{attrs:{name:"question-"+t.question.id}})])]):"USEFSingleChoice"===t.renderType?a("div",["vertical list"===t.attributes.display?a("ul",{staticClass:"no-bullet"},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("li",{key:r},[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"radio"},domProps:{value:r}}),t._v(" "+t._s(i)+" ")])])})),0):"horizontal list"===t.attributes.display?a("table",{staticClass:"no-bullet"},[a("thead",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(i))])})),0)]),a("tbody",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("td",{key:r,attrs:{scope:"col"}},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(i))]),a("input",{attrs:{name:"question-"+t.question.id,type:"radio"},domProps:{value:r}})])])})),0)])]):a("select",{attrs:{name:"question-"+t.question.id}},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("option",{key:r,domProps:{value:r}},[t._v(t._s(i))])})),0)]):"USEFMultiChoice"===t.renderType?a("div",["vertical list"===t.attributes.display?a("ul",{staticClass:"no-bullet"},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("li",{key:r},[a("label",[a("input",{attrs:{name:"question-"+t.question.id,type:"checkbox"},domProps:{value:r}}),t._v(" "+t._s(i)+" ")])])})),0):"horizontal list"===t.attributes.display?a("table",{staticClass:"no-bullet"},[a("thead",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(i))])})),0)]),a("tbody",[a("tr",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("td",{key:r,attrs:{scope:"col"}},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(i))]),a("input",{attrs:{name:"question-"+t.question.id,type:"checkbox"},domProps:{value:r}})])])})),0)])]):a("select",{attrs:{name:"question-"+t.question.id,multiple:""}},t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("option",{key:r,domProps:{value:r}},[t._v(t._s(i))])})),0)]):"USEFHidden"===t.renderType?a("div",[a("input",{attrs:{name:"question-"+t.question.id,type:"hidden"},domProps:{value:t.attributes.value}})]):"USEFSingleChoiceGrid"===t.renderType?a("div",[a("table",[a("thead",[a("th"),t._l(t.zip(t.attributes.columnValues,t.attributes.columnLabels),(function(e){var r=e[0],i=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(i))])}))],2),a("tbody",t._l(t.zip(t.attributes.rowValues,t.attributes.rowLabels),(function(e){var r=e[0],i=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t._l(t.zip(t.attributes.columnValues,t.attributes.columnLabels),(function(e){var i=e[0],s=e[1];return a("td",{key:i},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(s))]),a("input",{attrs:{name:"question-"+t.question.id+"."+r,type:"radio"},domProps:{value:i}})])])}))],2)})),0)])]):"USEFMultiChoiceGrid"===t.renderType?a("div",[a("table",[a("thead",[a("th"),t._l(t.zip(t.attributes.columnValues,t.attributes.columnLabels),(function(e){var r=e[0],i=e[1];return a("th",{key:r,attrs:{scope:"col"}},[t._v(t._s(i))])}))],2),a("tbody",t._l(t.zip(t.attributes.rowValues,t.attributes.rowLabels),(function(e){var r=e[0],i=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t._l(t.zip(t.attributes.columnValues,t.attributes.columnLabels),(function(e){var i=e[0],s=e[1];return a("td",{key:i},[a("label",[a("span",{staticClass:"show-for-sr"},[t._v(t._s(s))]),a("input",{attrs:{name:"question-"+t.question.id+"."+r,type:"checkbox"},domProps:{value:i}})])])}))],2)})),0)])]):"USEFInvalid"===t.renderType?a("p",[t._v("This question has an invalid question type and cannot be displayed.")]):t._e()]):t._e()},mt=[],gt=(a("c975"),a("4fad"),function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"zip",value:function(t,e){return t&&e?t.map((function(t,a){return a<e.length?[t,e[a]]:[t,t]})):[]}},{key:"questionType",get:function(){return this.$store.state.dataStore.data["question-types"][this.question.relationships["question-type"].data.id]}},{key:"attributes",get:function(){var t=this,e={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(a){t.$props.question.attributes[a[0]]?e[a[0]]=t.$props.question.attributes[a[0]]:a[1]&&"user"===a[1].source?"booleanValue"===a[1].type?e[a[0]]=!1:"listOfValues"===a[1].type?e[a[0]]=[]:a[1].allowed&&a[1].allowed.length>0?e[a[0]]=a[1].allowed[0]:"essQuestionCondition"===a[1].type?e[a[0]]={question:""}:e[a[0]]="":e[a[0]]=null})),e}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes.essCoreType.indexOf("USEF")?this.questionType.attributes.essCoreType:"USEFInvalid"}}]),a}(p["c"]));Object(c["a"])([Object(p["b"])()],gt.prototype,"question",void 0),gt=Object(c["a"])([p["a"]],gt);var yt=gt,xt=yt,_t=Object(x["a"])(xt,bt,mt,!1,null,null,null),kt=_t.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},t._l(t.editableAttributes,(function(e,r){return a("div",{key:r},["USEFDisplay"===t.questionType.attributes.essCoreType&&"singleValue"===e[1].type&&"format"===e[0]?a("label",[t._v(t._s(e[1].label)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]],expression:"localAttributes[attribute[0]]"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes,e[0],a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"text/html"}},[t._v("HTML")]),a("option",{attrs:{value:"text/text"}},[t._v("Text")])])]):"USEFSingleChoice"!==t.questionType.attributes.essCoreType&&"USEFMultiChoice"!==t.questionType.attributes.essCoreType||"singleValue"!==e[1].type||"display"!==e[0]?"listOfValues"==e[1].type?[a("label",[t._v(t._s(e[1].label))]),a("table",[a("tbody",t._l(t.localAttributes[e[0]],(function(r,i){return a("tr",{key:i},[a("td",[a("input",{attrs:{type:"text"},domProps:{value:r},on:{keyup:function(a){return t.setListOfValuesValue(e[0],i,a.target.value)}}})]),a("td",[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var s=r.keyboardNav;return[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Remove this value"},on:{keyup:s,click:function(a){return t.removeListOfValuesValue(e[0],i)}}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H5V11H19V13Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move this value up"},on:{keyup:s}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move this value down"},on:{keyup:s}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])])])])]}}],null,!0)})],1)])})),0),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"2"}},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(r){var i=r.keyboardNav;return[a("ul",{staticClass:"menu",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Add a value"},on:{keyup:i,click:function(a){return t.addListOfValuesValue(e[0])}}},[a("svg",{staticClass:"mdi icon success",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})])])])])]}}],null,!0)})],1)])])])]:"singleValue"===e[1].type?a("input-field",{attrs:{type:"text",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):"booleanValue"===e[1].type?a("input-field",{attrs:{type:"checkbox",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):"multiLineTextValue"===e[1].type?a("input-field",{attrs:{type:"textarea",label:e[1].label},model:{value:t.localAttributes[e[0]],callback:function(a){t.$set(t.localAttributes,e[0],a)},expression:"localAttributes[attribute[0]]"}}):"essQuestionCondition"===e[1].type&&t.localAttributes[e[0]]?[a("label",[t._v(t._s(e[1].label))]),a("div",{staticClass:"grid-x"},[a("div",{staticClass:"cell auto"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]].question,expression:"localAttributes[attribute[0]].question"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes[e[0]],"question",a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:""}},[t._v("--- Always display ---")]),t._l(t.listOfConditionalQuestions,(function(e){var r=e[0],i=e[1];return[a("option",{key:i.id,domProps:{value:i.id}},[t._v(t._s(r.attributes.name)+" - "+t._s(i.attributes.essName))])]}))],2)]),""!==t.localAttributes[e[0]].question?[t.isMultiQuestionQuestion(t.localAttributes[e[0]].question)?a("div",{staticClass:"cell shrink"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]].subQuestion,expression:"localAttributes[attribute[0]].subQuestion"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes[e[0]],"subQuestion",a.target.multiple?r:r[0])}}},t._l(t.getQuestionAttribute(t.localAttributes[e[0]].question,"rowValues"),(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"cell shrink"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]].operator,expression:"localAttributes[attribute[0]].operator"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes[e[0]],"operator",a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"eq"}},[t._v("Equals")]),a("option",{attrs:{value:"neq"}},[t._v("Not equals")])])]),a("div",{staticClass:"cell auto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]].value,expression:"localAttributes[attribute[0]].value"}],attrs:{type:"text"},domProps:{value:t.localAttributes[e[0]].value},on:{input:function(a){a.target.composing||t.$set(t.localAttributes[e[0]],"value",a.target.value)}}})])]:t._e()],2)]:a("div",[t._v(t._s(e[1]))]):a("label",[t._v(t._s(e[1].label)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localAttributes[e[0]],expression:"localAttributes[attribute[0]]"}],on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localAttributes,e[0],a.target.multiple?r:r[0])}}},t._l(e[1].allowed,(function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v(t._s(e))])})),0)])],2)})),0),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical sticky top",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Close the editor"},on:{keyup:r,click:t.close}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Save the question"},on:{keyup:r,click:t.save}},[a("svg",{class:{mdi:!0,icon:!0,secondary:!t.hasChanges},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}})])])]),t.canMoveUp?a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move up"},on:{keyup:r,click:function(e){return t.moveQuestion(-1)}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])])]):a("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[a("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])]),t.canMoveDown?a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Move down"},on:{keyup:r,click:function(e){return t.moveQuestion(1)}}},[a("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])])]):a("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[a("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Delete"},on:{keyup:r,click:t.deleteQuestion}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])])]}}])})],1)])},jt=[],wt=a("3835"),Ct=a("5530"),St=a("7fae"),qt=a.n(St),$t=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localAttributes={},t.errors={},t}return Object(o["a"])(a,[{key:"isMultiQuestionQuestion",value:function(t){var e=this.$store.state.dataStore.data.questions[t];if(e){var a=this.$store.state.dataStore.data["question-types"][e.relationships["question-type"].data.id];if(a&&("USEFSingleChoiceGrid"===a.attributes.essCoreType||"USEFMultiChoiceGrid"===a.attributes.essCoreType))return!0}return!1}},{key:"getQuestionAttribute",value:function(t,e){var a=this.$store.state.dataStore.data.questions[t];return a?a.attributes[e]:null}},{key:"mounted",value:function(){var t=this;this.localAttributes=h()(this.question.attributes),this.editableAttributes.forEach((function(e){t.localAttributes[e[0]]||"user"===e[1].source&&("booleanValue"===e[1].type?p["c"].set(t.localAttributes,e[0],!1):"listOfValues"===e[1].type?p["c"].set(t.localAttributes,e[0],[]):e[1].allowed&&e[1].allowed.length>0?p["c"].set(t.localAttributes,e[0],e[1].allowed[0]):"essQuestionCondition"===e[1].type?p["c"].set(t.localAttributes,e[0],{question:""}):p["c"].set(t.localAttributes,e[0],""))}))}},{key:"updateQuestion",value:function(){var t=this;this.localAttributes=h()(this.question.attributes),this.editableAttributes.forEach((function(e){t.localAttributes[e[0]]||"user"===e[1].source&&("booleanValue"===e[1].type?p["c"].set(t.localAttributes,e[0],!1):"listOfValues"===e[1].type?p["c"].set(t.localAttributes,e[0],[]):e[1].allowed&&e[1].allowed.length>0?p["c"].set(t.localAttributes,e[0],e[1].allowed[0]):"essQuestionCondition"===e[1].type?p["c"].set(t.localAttributes,e[0],{question:""}):p["c"].set(t.localAttributes,e[0],""))}))}},{key:"save",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=h()(this.question),e.attributes=this.localAttributes,t.prev=2,this.errors={},t.next=6,this.$store.dispatch("saveQuestion",e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),this.errors=Object(Z["errorsToDict"])(t.t0);case 11:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"close",value:function(){this.hasChanges?confirm("This will cause any changes to this question to be lost. Continue?")&&this.$emit("close"):this.$emit("close")}},{key:"moveQuestion",value:function(t){var e=this,a=h()(this.page),r=-1;if(a.relationships.questions.data.forEach((function(t,a){t.id===e.question.id&&(r=a)})),-1!==r){var i=r+t;a.relationships.questions.data.splice(r,1),a.relationships.questions.data.splice(i,0,{type:"questions",id:this.question.id}),this.$store.dispatch("savePage",a)}}},{key:"deleteQuestion",value:function(){confirm("Please confirm that you wish to delete this question?")&&this.$store.dispatch("deleteQuestion",this.question)}},{key:"addListOfValuesValue",value:function(t){this.localAttributes[t].push("")}},{key:"setListOfValuesValue",value:function(t,e,a){p["c"].set(this.localAttributes[t],e,a)}},{key:"removeListOfValuesValue",value:function(t,e){this.localAttributes[t].splice(e,1)}},{key:"questionType",get:function(){return this.$store.state.dataStore.data["question-types"][this.question.relationships["question-type"].data.id]}},{key:"editableAttributes",get:function(){return Object.entries(this.questionType.attributes).filter((function(t){return t[1]&&"user"===t[1].source}))}},{key:"attributes",get:function(){return h()(Object(Ct["a"])(Object(Ct["a"])({},this.questionType.attributes),this.question.attributes))}},{key:"hasChanges",get:function(){var t=this,e=!1;return this.editableAttributes.forEach((function(a){var r=Object(wt["a"])(a,2),i=r[0],s=r[1];"user"===s.source&&(qt()(t.question.attributes[i],t.localAttributes[i])||(e=!0))})),e}},{key:"canMoveUp",get:function(){return this.page.relationships.questions.data[0].id!==this.question.id}},{key:"canMoveDown",get:function(){return this.page.relationships.questions.data[this.page.relationships.questions.data.length-1].id!==this.question.id}},{key:"listOfConditionalQuestions",get:function(){var t=this,e=[];return Object.values(this.$store.state.dataStore.data.pages).forEach((function(a){a.relationships.questions.data.forEach((function(r){var i=t.$store.state.dataStore.data.questions[r.id];if(i&&i.id!==t.question.id){var s=t.$store.state.dataStore.data["question-types"][i.relationships["question-type"].data.id];s&&"USEFDisplay"!==s.attributes.essCoreType&&e.push([a,i])}}))})),e}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],$t.prototype,"page",void 0),Object(c["a"])([Object(p["b"])()],$t.prototype,"question",void 0),Object(c["a"])([Object(p["d"])("question")],$t.prototype,"updateQuestion",null),$t=Object(c["a"])([Object(p["a"])({components:{InputField:X,AriaMenubar:k}})],$t);var At=$t,Et=At,Pt=Object(x["a"])(Et,Ot,jt,!1,null,null,null),Tt=Pt.exports,Vt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.editing=!1,t}return Object(o["a"])(a,[{key:"startEditing",value:function(){this.editing=!0}},{key:"endEditing",value:function(){this.editing=!1}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],Vt.prototype,"page",void 0),Object(c["a"])([Object(p["b"])()],Vt.prototype,"question",void 0),Vt=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,QuestionRenderer:kt,QuestionEditor:Tt}})],Vt);var Mt=Vt,Ht=Mt,Rt=Object(x["a"])(Ht,vt,ft,!1,null,null,null),Lt=Rt.exports,Ut=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.insertIdx=-1,t.insertPosition="",t}return Object(o["a"])(a,[{key:"insertQuestion",value:function(t,e){this.insertIdx=t,this.insertPosition=e}},{key:"page",get:function(){if(this.$store.state.dataStore.data.pages){var t=this.$store.state.dataStore.data.pages[this.$route.params.pid];if(t)return t}return null}},{key:"isCurrentRoute",get:function(){return"page.edit"===this.$route.name}},{key:"questions",get:function(){var t=this;return this.page&&this.page.relationships&&this.$store.state.dataStore.data.questions?this.page.relationships.questions.data.map((function(e){return t.$store.state.dataStore.data.questions[e.id]})).filter((function(t){return t})):[]}}]),a}(p["c"]);Ut=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,AddQuestion:ht,QuestionBlock:Lt}})],Ut);var Nt=Ut,Qt=Nt,Ft=Object(x["a"])(Qt,st,nt,!1,null,null,null),It=Ft.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button hollow primary small",on:{click:t.addTransition}},[t._v("Add a transition")])])])]),t._l(t.transitions,(function(t){return a("transition-editor",{key:t.id,attrs:{transition:t}})})),t.newTransition?a("transition-editor",{attrs:{transition:t.newTransition},on:{created:t.newTransitionCreated}}):t._e()],2)},Dt=[],Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.localTransition?a("section",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-auto"},[a("label",[t._v("Transition to "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localTransition.relationships.target.data.id,expression:"localTransition.relationships.target.data.id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localTransition.relationships.target.data,"id",e.target.multiple?a:a[0])}}},[t._l(t.pages,(function(e){return[e.id!==t.localTransition.relationships.source.data.id?a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")]):t._e()]}))],2)])]),a("div",{staticClass:"cell large-shrink"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical sticky top",attrs:{role:"menubar"}},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Save the transition"},on:{keyup:r,click:t.save}},[a("svg",{class:{mdi:!0,icon:!0,secondary:!t.hasChanges},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",tabindex:"-1","aria-label":"Delete"},on:{keyup:r,click:t.deleteTransition}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])])]}}],null,!1,4224831418)})],1)]):t._e()},zt=[],Gt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localTransition=null,t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.localTransition=h()(this.transition)}},{key:"updateTransition",value:function(){this.localTransition=h()(this.transition)}},{key:"save",value:function(){if(this.localTransition)try{this.localTransition.id?this.$store.dispatch("saveTransition",this.localTransition):(this.$store.dispatch("createTransition",this.localTransition),this.$emit("created"))}catch(t){this.errors=Object(Z["errorsToDict"])(t)}}},{key:"deleteTransition",value:function(){this.localTransition&&(this.localTransition.id?confirm("Please confirm that you wish to delete this transition?")&&this.$store.dispatch("deleteTransition",this.localTransition):this.$emit("created"))}},{key:"pages",get:function(){return Object.values(this.$store.state.dataStore.data.pages)}},{key:"hasChanges",get:function(){return!(!this.transition||!this.localTransition)&&this.transition.relationships.target.data.id!=this.localTransition.relationships.target.data.id}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],Gt.prototype,"transition",void 0),Object(c["a"])([Object(p["d"])("transition")],Gt.prototype,"updateTransition",null),Gt=Object(c["a"])([Object(p["a"])({components:{InputField:X,AriaMenubar:k}})],Gt);var Jt=Gt,Yt=Jt,Kt=Object(x["a"])(Yt,Zt,zt,!1,null,null,null),Wt=Kt.exports,Xt=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.name="",t.title="",t.errors={},t.newTransition=null,t}return Object(o["a"])(a,[{key:"addTransition",value:function(){this.page&&(this.newTransition={type:"transitions",attributes:{},relationships:{source:{data:{type:"pages",id:this.page.id}},target:{data:{type:"pages",id:""}}}})}},{key:"newTransitionCreated",value:function(){this.newTransition=null}},{key:"page",get:function(){if(this.$store.state.dataStore.data.pages){var t=this.$store.state.dataStore.data.pages[this.$route.params.pid];if(t)return t}return null}},{key:"transitions",get:function(){var t=this;return this.page&&this.page.relationships&&this.page.relationships.next&&this.$store.state.dataStore.data.transitions?this.page.relationships.next.data.map((function(e){return t.$store.state.dataStore.data.transitions[e.id]})).filter((function(t){return t})):[]}}]),a}(p["c"]);Xt=Object(c["a"])([Object(p["a"])({components:{TransitionEditor:Wt}})],Xt);var te=Xt,ee=te,ae=Object(x["a"])(ee,Bt,Dt,!1,null,null,null),re=ae.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[this.page?a("form",{on:{submit:function(e){return e.preventDefault(),t.updatePage(e)}}},[a("input-field",{attrs:{type:"text",label:"Name",error:t.errors.name},model:{value:t.page.attributes.name,callback:function(e){t.$set(t.page.attributes,"name",e)},expression:"page.attributes.name"}}),a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.page.attributes.title,callback:function(e){t.$set(t.page.attributes,"title",e)},expression:"page.attributes.title"}}),t._m(0)],1):t._e()])},se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button primary"},[t._v("Update")])])])])}],ne=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.name="",t.title="",t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.errors={}}},{key:"watchPage",value:function(){this.errors={}}},{key:"updatePage",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.page){t.next=10;break}return t.prev=1,this.errors={},t.next=5,this.$store.dispatch("savePage",this.page);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.errors=Object(Z["errorsToDict"])(t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"page",get:function(){if(this.$store.state.dataStore.data.pages){var t=this.$store.state.dataStore.data.pages[this.$route.params.pid];if(t)return h()(t)}return null}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("page")],ne.prototype,"watchPage",null),ne=Object(c["a"])([Object(p["a"])({components:{InputField:X}})],ne);var oe=ne,ue=oe,le=Object(x["a"])(ue,ie,se,!1,null,null,null),ce=le.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",[a("ul",{staticClass:"menu align-right"},[a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem","aria-label":"Reload results"},on:{click:t.reload}},[a("svg",{staticClass:"icon mdi",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z"}})])])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{role:"menuitem",href:t.$store.state.config.experiment.downloadResultsUrl,target:"_blank","aria-label":"Download results"}},[a("svg",{staticClass:"icon mdi",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"}})])])])])]),a("ul",{staticClass:"no-bullet"},t._l(t.pages,(function(t){return a("li",{key:t.id,staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell"},[a("results-summary",{attrs:{page:t}})],1)])})),0)])},de=[],he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.questionResults?[a("h2",[t._v(t._s(t.page.attributes.name)+" ("+t._s(t.page.attributes.title)+")")]),t._l(t.questionResults,(function(t){var e=t[0],r=t[1];return a("question-results",{key:e.id,attrs:{question:e,results:r}})}))]:t._e()],2)},ve=[],fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v(t._s(t.question.attributes.title))]),"USEFSingleLineInput"===t.renderType||"USEFMultiLineInput"===t.renderType||"USEFHidden"===t.renderType?a("div",[a("table",[a("tbody",t._l(t.results.attributes.responses[t.question.id],(function(e,r){var i=e[0],s=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),a("td",[t._v(t._s(s))])])})),0)])]):"USEFSingleChoice"===t.renderType||"USEFMultiChoice"===t.renderType?a("div",[a("table",[a("tbody",t._l(t.zip(t.attributes.values,t.attributes.labels),(function(e){var r=e[0],i=e[1];return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t.results.attributes.responses[t.question.id][r]?a("td",[t._v(t._s(t.results.attributes.responses[t.question.id][r]))]):a("td",[t._v("0")])])})),0)])]):"USEFSingleChoiceGrid"===t.renderType||"USEFMultiChoiceGrid"===t.renderType?a("div",t._l(t.zip(t.attributes.row_values,t.attributes.row_labels),(function(e){var r=e[0],i=e[1];return a("div",{key:r},[a("h4",[t._v(t._s(i))]),a("table",[a("tbody",t._l(t.zip(t.attributes.column_values,t.attributes.column_labels),(function(e){var i=e[0],s=e[1];return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s))]),t.results.attributes.responses[t.question.id][r][i]?a("td",[t._v(t._s(t.results.attributes.responses[t.question.id][r][i]))]):a("td",[t._v("0")])])})),0)])])})),0):"USEFInvalid"===t.renderType?a("p",[t._v("This question has an invalid question type and cannot be displayed.")]):t._e()])},be=[],me=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"zip",value:function(t,e){return t.map((function(t,a){return a<e.length?[t,e[a]]:[t,t]}))}},{key:"questionType",get:function(){return this.$store.state.questionTypes[this.$props.question.relationships["question-type"].data.id]}},{key:"attributes",get:function(){var t=this,e={};return this.questionType&&Object.entries(this.questionType.attributes).forEach((function(a){t.$props.question.attributes[a[0]]?e[a[0]]=t.$props.question.attributes[a[0]]:a[1]&&"user"===a[1].source?"booleanValue"===a[1].type?e[a[0]]=!1:"listOfValues"===a[1].type?e[a[0]]=[]:a[1].allowed&&a[1].allowed.length>0?e[a[0]]=a[1].allowed[0]:e[a[0]]="":e[a[0]]=null})),e}},{key:"renderType",get:function(){return this.questionType&&0===this.questionType.attributes._core_type.indexOf("USEF")?this.questionType.attributes._core_type:"USEFInvalid"}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],me.prototype,"question",void 0),Object(c["a"])([Object(p["b"])()],me.prototype,"results",void 0),me=Object(c["a"])([p["a"]],me);var ge=me,ye=ge,xe=Object(x["a"])(ye,fe,be,!1,null,null,null),_e=xe.exports,ke=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"questionResults",get:function(){var t=this;if(this.page&&this.$store.state.dataStore.data.questions&&this.$store.state.dataStore.data.questionTypes&&this.$store.state.dataStore.data.results){var e=this.page.relationships.questions.data.map((function(e){if(!t.$store.state.dataStore.data.questions[e.id])return null;var a=t.$store.state.dataStore.data.questions[e.id].relationships["question-type"].data.id;return t.$store.state.dataStore.data.questionTypes[a]?"USEFDisplay"===t.$store.state.dataStore.data.questionTypes[a].attributes["_core_type"]?null:t.$store.state.dataStore.data.results[t.page.id]?[t.$store.state.dataStore.data.questions[e.id],t.$store.state.dataStore.data.results[t.page.id]]:void 0:null})).filter((function(t){return t}));return e.length>0?e:null}return null}}]),a}(p["c"]);Object(c["a"])([Object(p["b"])()],ke.prototype,"page",void 0),ke=Object(c["a"])([Object(p["a"])({components:{QuestionResults:_e}})],ke);var Oe=ke,je=Oe,we=Object(x["a"])(je,he,ve,!1,null,null,null),Ce=we.exports,Se=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"reload",value:function(){var t=this;this.pages.forEach((function(e){t.$store.dispatch("fetchSingle",{type:"results",id:e.id})}))}},{key:"flattenPages",value:function(t){var e=this,a=[t];return t.relationships.next&&t.relationships.next.data.forEach((function(t){var r=e.$store.state.dataStore.data.transitions[t.id];if(r&&r.relationships.target){var i=e.$store.state.dataStore.data.pages[r.relationships.target.data.id];i&&(a=a.concat(e.flattenPages(i)))}})),a}},{key:"experiment",get:function(){return this.$store.getters.experiment}},{key:"firstPage",get:function(){return this.experiment&&this.experiment.relationships["first-page"]&&this.$store.state.dataStore.data.pages?this.$store.state.dataStore.data.pages[this.experiment.relationships["first-page"].data.id]:null}},{key:"pages",get:function(){if(this.firstPage&&this.$store.state.dataStore.data.transitions){var t=this.flattenPages(this.firstPage);return Object.values(this.$store.state.dataStore.data.pages).forEach((function(e){var a=!1;t.forEach((function(t){e.id===t.id&&(a=!0)})),a||t.push(e)})),t}return this.$store.state.dataStore.data.pages?Object.values(this.$store.state.dataStore.data.pages):[]}}]),a}(p["c"]);Se=Object(c["a"])([Object(p["a"])({components:{ResultsSummary:Ce}})],Se);var qe=Se,$e=qe,Ae=Object(x["a"])($e,pe,de,!1,null,null,null),Ee=Ae.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings grid-x grid-padding-x"},[a("h2",{staticClass:"cell large-12"},[t._v("Settings")]),a("div",{staticClass:"cell large-3"},[a("aria-menubar",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.keyboardNav;return[a("ul",{staticClass:"menu vertical",attrs:{role:"menubar"}},[a("router-link",{attrs:{to:"/settings"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isExactActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem","aria-current":n?"page":null},on:{keyup:r,click:s}},[t._v("General")])])]}}],null,!0)}),t.$store.getters.isOwner?a("router-link",{attrs:{to:"/settings/permissions"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem","aria-current":n?"page":null},on:{keyup:r,click:s}},[t._v("Permissions")])])]}}],null,!0)}):t._e(),t.$store.getters.isOwner?a("router-link",{attrs:{to:"/settings/actions"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,s=e.navigate,n=e.isActive;return[a("li",{class:n?"is-active":"",attrs:{role:"presentation"}},[a("a",{attrs:{href:i,tabindex:"0",role:"menuitem","aria-current":n?"page":null},on:{keyup:r,click:s}},[t._v("Actions")])])]}}],null,!0)}):t._e()],1)]}}])})],1),t.isCurrentRoute&&t.localExperiment?a("div",{staticClass:"cell large-9"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateExperiment(e)}}},[a("input-field",{attrs:{type:"text",label:"Title",error:t.errors.title},model:{value:t.localExperiment.attributes.title,callback:function(e){t.$set(t.localExperiment.attributes,"title",e)},expression:"localExperiment.attributes.title"}}),a("input-field",{attrs:{type:"textarea",label:"Description",error:t.errors.description},model:{value:t.localExperiment.attributes.description,callback:function(e){t.$set(t.localExperiment.attributes,"description",e)},expression:"localExperiment.attributes.description"}}),t.localExperiment.relationships["first-page"]?a("label",[t._v("First page "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.localExperiment.relationships["first-page"].data.id,expression:"localExperiment.relationships['first-page'].data.id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.localExperiment.relationships["first-page"].data,"id",e.target.multiple?a:a[0])}}},t._l(t.pages,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.attributes.name)+" ("+t._s(e.attributes.title)+")")])})),0)]):t._e(),t._m(0)],1)]):t._e(),t.isCurrentRoute?t._e():a("div",{staticClass:"cell large-9"},[a("router-view")],1)])},Te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buttons"},[a("ul",[a("li",[a("button",{staticClass:"button primary"},[t._v("Update")])])])])}],Ve=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.localExperiment=null,t.errors={},t}return Object(o["a"])(a,[{key:"mounted",value:function(){this.$store.getters.experiment?(this.localExperiment=h()(this.$store.getters.experiment),this.localExperiment&&!this.localExperiment.relationships["first-page"]&&this.pages.length>0&&(this.localExperiment.relationships["first-page"]={data:{type:"pages",id:""}})):this.localExperiment=null}},{key:"watchExperiment",value:function(){this.$store.getters.experiment?(this.localExperiment=h()(this.$store.getters.experiment),this.localExperiment&&!this.localExperiment.relationships["first-page"]&&this.pages.length>0&&(this.localExperiment.relationships["first-page"]={data:{type:"pages",id:""}})):this.localExperiment=null}},{key:"updateExperiment",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.localExperiment){t.next=10;break}return t.prev=1,this.errors={},t.next=5,this.$store.dispatch("saveExperiment",this.localExperiment);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.errors=Object(Z["errorsToDict"])(t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"pages",get:function(){var t=this;return this.localExperiment&&this.$store.state.dataStore.data.pages?this.localExperiment.relationships.pages.data.map((function(e){return t.$store.state.dataStore.data.pages[e.id]?t.$store.state.dataStore.data.pages[e.id]:null})).filter((function(t){return t})):[]}},{key:"isCurrentRoute",get:function(){return"settings"===this.$route.name}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("experiment")],Ve.prototype,"watchExperiment",null),Ve=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,InputField:X}})],Ve);var Me=Ve,He=Me,Re=Object(x["a"])(He,Pe,Te,!1,null,null,null),Le=Re.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings-permissions"},[a("ul",{staticClass:"no-bullet no-margin"},t._l(t.permissions,(function(e){return a("li",{key:e.id,staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell auto"},[t.userForUserRef(e.relationships.user.data)?a("h3",[t._v(t._s(t.userForUserRef(e.relationships.user.data).attributes.name))]):t._e(),t.canModify(e)?a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.attributes.role,expression:"permission.attributes.role"}],on:{change:[function(a){var r=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e.attributes,"role",a.target.multiple?r:r[0])},function(a){return t.modifyPermission(e)}]}},[a("option",{attrs:{value:"owner"}},[t._v("Owner")]),a("option",{attrs:{value:"author"}},[t._v("Author")]),a("option",{attrs:{value:"tester"}},[t._v("Tester")])]),"owner"===e.attributes.role?a("p",{staticClass:"font-small"},[t._v("An owner can modify all aspects of the experiment.")]):"author"===e.attributes.role?a("p",{staticClass:"font-small"},[t._v("An author can edit the experiment, but cannot modify permissions.")]):"tester"===e.attributes.role?a("p",{staticClass:"font-small"},[t._v("A tester can only view the experiment.")]):t._e()]):a("p",{staticClass:"font-small"},[t._v("This user owns this experiment. As there is only one owner, this cannot be changed.")])]),a("div",{staticClass:"cell shrink"},[t.canModify(e)?a("a",{attrs:{"aria-label":"Delete this permission"},on:{click:function(a){return t.deletePermission(e)}}},[a("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])]):a("svg",{staticClass:"mdi icon medium-gray",attrs:{viewBox:"0 0 24 24","aria-label":"This permission cannot be deleted"}},[a("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])})),0),a("div",[a("div",{staticClass:"text-right"},[a("button",{staticClass:"button primary hollow small",on:{click:t.toggleAddPermission}},[t.isAddingPermission?[t._v("Don't add permission")]:[t._v("Add permission")]],2)]),t.isAddingPermission?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-5"},[a("h3",[t._v("Add a Permission")]),a("form",[a("label",[t._v("Search "),a("input-field",{attrs:{type:"text"},model:{value:t.addUserSearch,callback:function(e){t.addUserSearch=e},expression:"addUserSearch"}})],1),a("ul",{staticClass:"no-bullet"},t._l(t.addUsers,(function(e){return a("li",{key:e.id},[a("a",{on:{click:function(a){return t.addPermission(e)}}},[t._v(t._s(e.attributes.name))])])})),0)])])]):t._e()])])},Ne=[],Qe=a("bc3a"),Fe=a.n(Qe),Ie=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.errors={},t.isAddingPermission=!1,t.addUserSearch="",t.addUsers=[],t}return Object(o["a"])(a,[{key:"userForUserRef",value:function(t){return this.$store.state.dataStore.data.users&&this.$store.state.dataStore.data.users[t.id]?this.$store.state.dataStore.data.users[t.id]:null}},{key:"canModify",value:function(t){return"owner"!==t.attributes.role||this.permissions.filter((function(t){return"owner"===t.attributes.role})).length>1}},{key:"userSearchChange",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){var a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e){t.next=5;break}return t.next=3,Fe.a.get(this.$store.state.config.dataStore.apiBaseUrl+"/users?filter[email]="+e);case 3:a=t.sent,this.addUsers=a.data.data.filter((function(t){var e=!1;return r.permissions.forEach((function(a){t.id===a.relationships.user.data.id&&(e=!0)})),!e}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deletePermission",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("deleteSingle",e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"toggleAddPermission",value:function(){this.isAddingPermission=!this.isAddingPermission}},{key:"addPermission",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("createPermission",{type:"experiment-permissions",attributes:{role:"author"},relationships:{user:{data:{type:"users",id:e.id}},experiment:{data:{type:"experiments",id:this.$store.state.config.experiment.id}}}});case 2:this.isAddingPermission=!1,this.addUserSearch="";case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"modifyPermission",value:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("savePermission",e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"permissions",get:function(){return this.$store.state.dataStore.data["experiment-permissions"]?Object.values(this.$store.state.dataStore.data["experiment-permissions"]):[]}}]),a}(p["c"]);Object(c["a"])([Object(p["d"])("addUserSearch")],Ie.prototype,"userSearchChange",null),Ie=Object(c["a"])([Object(p["a"])({components:{AriaMenubar:k,InputField:X}})],Ie);var Be=Ie,De=Be,Ze=Object(x["a"])(De,Ue,Ne,!1,null,null,null),ze=Ze.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings-actions"},[a("form",{attrs:{action:t.$store.state.config.experiment.deleteUrl,method:"post"},on:{submit:t.confirmDeleteExperiment}},[a("input",{attrs:{type:"hidden",name:"csrf_token"},domProps:{value:t.$store.state.config.dataStore.csrfToken}}),a("button",{staticClass:"button alert"},[t._v("Delete this Experiment")]),t._m(0)])])},Je=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("This will permanently delete this experiment and all data that is associated with it. This step "),a("strong",[t._v("cannot")]),t._v(" be undone.")])}],Ye=function(t){Object(u["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"confirmDeleteExperiment",value:function(t){confirm("Please confirm that you wish to delete this experiment and all data that is associated with it.")||t.preventDefault()}}]),a}(p["c"]);Ye=Object(c["a"])([Object(p["a"])({components:{}})],Ye);var Ke=Ye,We=Ke,Xe=Object(x["a"])(We,Ge,Je,!1,null,null,null),ta=Xe.exports;r["a"].use(q["a"]);var ea=[{path:"/",name:"overview",component:M},{path:"/pages",name:"pages",component:I,children:[{path:"create",name:"page.create",component:it},{path:":pid",name:"page.edit",component:It,children:[{path:"transitions",name:"page.transitions",component:re},{path:"settings",name:"page.settings",component:ce}]}]},{path:"/results",name:"results",component:Ee},{path:"/settings",name:"settings",component:Le,children:[{path:"permissions",name:"settings.permissions",component:ze},{path:"actions",name:"settings.actions",component:ta}]}],aa=new q["a"]({mode:"hash",base:"/static/experiment-editor/",routes:ea}),ra=aa,ia=(a("d3b7"),a("3ca3"),a("ddb0"),a("2f62"));r["a"].use(ia["a"]);var sa=new ia["a"].Store({state:{config:{dataStore:{apiBaseUrl:"",csrfToken:""},experiment:{id:"",userId:"",externalUrl:"",deleteUrl:"",downloadResultsUrl:""}},ui:{busy:!1,busyCounter:0,busyMaxCounter:0}},mutations:{setConfig:function(t,e){t.config=e},setBusy:function(t,e){e?(t.ui.busyCounter=t.ui.busyCounter+1,t.ui.busyMaxCounter=t.ui.busyMaxCounter+1):(t.ui.busyCounter=t.ui.busyCounter-1,0===t.ui.busyCounter&&setTimeout((function(){t.ui.busyMaxCounter=0}),400)),t.ui.busy=t.ui.busyCounter>0}},actions:{init:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,i=t.dispatch,r("setConfig",e),a.next=4,Promise.all([i("loadQuestionTypes"),i("loadExperiment")]);case 4:case"end":return a.stop()}}),a)})))()},loadQuestionTypes:function(t){return Object(L["a"])(regeneratorRuntime.mark((function e(){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,e.next=3,a("fetchAll","question-type-groups");case 3:return r=e.sent,i=[],r.forEach((function(t){t.relationships["question-types"].data.forEach((function(t){i.push(a("fetchSingle",t))}))})),e.next=8,Promise.all(i);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))()},loadExperiment:function(t){return Object(L["a"])(regeneratorRuntime.mark((function e(){var a,r,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,r=t.state,i=r.dataStore.data.experiments?r.dataStore.data.experiments[r.config.experiment.id]:null,e.next=4,a("fetchSingle",{type:"experiments",id:r.config.experiment.id});case 4:if(s=e.sent,qt()(i,s,{strict:!0})){e.next=10;break}return n=s.relationships.pages.data.map((function(t){return a("loadPage",t)})),n=n.concat(s.relationships.permissions.data.map((function(t){return a("loadPermission",t)}))),e.next=10,Promise.all(n);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))()},saveExperiment:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,i=t.state,s=i.dataStore.data.experiments?i.dataStore.data.experiments[i.config.experiment.id]:null,a.next=4,r("saveSingle",e);case 4:if(e=a.sent,s&&qt()(s.relationships,e.relationships,{strict:!0})){a.next=9;break}return n=e.relationships.pages.data.map((function(t){return r("loadPage",t)})),a.next=9,Promise.all(n);case 9:return a.abrupt("return",e);case 10:case"end":return a.stop()}}),a)})))()},loadPermission:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,i=t.state,s=i.dataStore.data["experiment-permissions"]?i.dataStore.data["experiment-permissions"][e.id]:null,a.next=4,r("fetchSingle",e);case 4:if(n=a.sent,s&&qt()(s.relationships,n.relationships)){a.next=8;break}return a.next=8,Promise.all([r("loadExperiment"),r("loadUser",n.relationships.user.data)]);case 8:return a.abrupt("return",n);case 9:case"end":return a.stop()}}),a)})))()},createPermission:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("createSingle",e);case 3:return e=a.sent,a.next=6,Promise.all([r("loadExperiment"),r("loadUser",e.relationships.user.data)]);case 6:case"end":return a.stop()}}),a)})))()},savePermission:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,i=t.state,s=i.dataStore.data["experiment-permissions"]?i.dataStore.data["experiment-permissions"][e.id]:null,a.next=4,r("saveSingle",e);case 4:if(e=a.sent,s&&qt()(s.relationships,e.relationships)){a.next=8;break}return a.next=8,Promise.all([r("loadExperiment"),r("loadUser",e.relationships.user.data)]);case 8:return a.abrupt("return",e);case 9:case"end":return a.stop()}}),a)})))()},loadUser:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("fetchSingle",e);case 3:return i=a.sent,a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},loadPage:function(t,e){var a=this;return Object(L["a"])(regeneratorRuntime.mark((function r(){var i,s,n,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.dispatch,s=t.state,n=s.dataStore.data.pages?a.state.dataStore.data.pages[e.id]:null,r.next=4,i("fetchSingle",e);case 4:if(o=r.sent,n&&qt()(n.relationships,o.relationships,{strict:!0})){r.next=10;break}return u=o.relationships.next.data.map((function(t){return i("loadTransition",t)})),u=u.concat(o.relationships.questions.data.map((function(t){return i("loadQuestion",t)}))),r.next=10,Promise.all(u);case 10:return r.abrupt("return",o);case 11:case"end":return r.stop()}}),r)})))()},createPage:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("createSingle",e);case 3:return e=a.sent,a.next=6,r("loadExperiment");case 6:return a.abrupt("return",e);case 7:case"end":return a.stop()}}),a)})))()},savePage:function(t,e){var a=this;return Object(L["a"])(regeneratorRuntime.mark((function r(){var i,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.dispatch,s=t.state,n=s.dataStore.data.pages?a.state.dataStore.data.pages[e.id]:null,r.next=4,i("saveSingle",e);case 4:if(e=r.sent,n&&qt()(n.relationships,e.relationships,{strict:!0})){r.next=10;break}return o=e.relationships.next.data.map((function(t){return i("loadTransition",t)})),o=o.concat(e.relationships.questions.data.map((function(t){return i("loadQuestion",t)}))),r.next=10,Promise.all(o);case 10:case"end":return r.stop()}}),r)})))()},deletePage:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,i=[],e.relationships.next&&(i=e.relationships.next.data.map((function(t){return r("deleteSingle",t)}))),e.relationships.prev&&(i=i.concat(e.relationships.prev.data.map((function(t){return r("deleteSingle",t)})))),a.next=6,Promise.all(i);case 6:return a.next=8,r("deleteSingle",e);case 8:return a.next=10,r("loadExperiment");case 10:return a.abrupt("return",!0);case 11:case"end":return a.stop()}}),a)})))()},loadTransition:function(t,e){var a=this;return Object(L["a"])(regeneratorRuntime.mark((function r(){var i,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.dispatch,s=t.state,n=s.dataStore.data.transitions?a.state.dataStore.data.transitions[e.id]:null,r.next=4,i("fetchSingle",e);case 4:if(o=r.sent,n&&qt()(n.relationships,o.relationships,{strict:!0})){r.next=12;break}if(!o.relationships.source){r.next=9;break}return r.next=9,i("loadPage",o.relationships.source.data);case 9:if(!o.relationships.target){r.next=12;break}return r.next=12,i("loadPage",o.relationships.target.data);case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})))()},createTransition:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("createSingle",e);case 3:if(e=a.sent,!e.relationships.source){a.next=7;break}return a.next=7,r("loadPage",e.relationships.source.data);case 7:if(!e.relationships.target){a.next=10;break}return a.next=10,r("loadPage",e.relationships.target.data);case 10:return a.abrupt("return",e);case 11:case"end":return a.stop()}}),a)})))()},saveTransition:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,i=t.state,s=i.dataStore.data.transitions[e.id],a.next=4,r("saveSingle",e);case 4:if(e=a.sent,!s.relationships.target){a.next=8;break}return a.next=8,r("loadPage",s.relationships.target.data);case 8:if(!e.relationships.target){a.next=11;break}return a.next=11,r("loadPage",e.relationships.target.data);case 11:return a.abrupt("return",e);case 12:case"end":return a.stop()}}),a)})))()},deleteTransition:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("deleteSingle",e);case 3:if(!e.relationships.source){a.next=6;break}return a.next=6,r("loadPage",e.relationships.source.data);case 6:if(!e.relationships.target){a.next=9;break}return a.next=9,r("loadPage",e.relationships.target.data);case 9:case"end":return a.stop()}}),a)})))()},loadQuestion:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("fetchSingle",e);case 3:return i=a.sent,a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},createQuestion:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("createSingle",e);case 3:return e=a.sent,a.abrupt("return",e);case 5:case"end":return a.stop()}}),a)})))()},saveQuestion:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("saveSingle",e);case 3:return e=a.sent,a.abrupt("return",e);case 5:case"end":return a.stop()}}),a)})))()},deleteQuestion:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.dispatch,a.next=3,r("deleteSingle",e);case 3:return a.next=5,r("loadPage",e.relationships.page.data);case 5:return a.abrupt("return",!0);case 6:case"end":return a.stop()}}),a)})))()}},getters:{experiment:function(t){return t.dataStore.data.experiments&&t.dataStore.data.experiments[t.config.experiment.id]?t.dataStore.data.experiments[t.config.experiment.id]:null},isOwner:function(t){return!!t.dataStore.data["experiment-permissions"]&&Object.values(t.dataStore.data["experiment-permissions"]).filter((function(e){return"owner"===e.attributes.role&&e.relationships.user.data.id===t.config.experiment.userId})).length>0}},modules:{dataStore:Z["dataStoreModule"]}});r["a"].config.productionTip=!1,new r["a"]({router:ra,store:sa,render:function(t){return t(S)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map