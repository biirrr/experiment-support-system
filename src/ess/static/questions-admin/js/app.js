(function(e){function t(t){for(var n,s,u=t[0],o=t[1],c=t[2],p=0,d=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,u=1;u<r.length;u++){var o=r[u];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/questions-admin/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=o;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"37ba":function(e,t,r){},"6d73":function(e,t,r){"use strict";var n=r("37ba"),a=r.n(n);t["default"]=a.a},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"questions-admin",attrs:{id:"app"}},[e.$store.state.ui.busy?r("div",{staticClass:"busy-overlay"},[r("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"}},[r("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[r("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[r("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),r("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[r("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]):e._e(),r("router-view")],1)},i=[],s=r("d4ec"),u=r("bee2"),o=r("262e"),c=r("2caf"),l=r("9ab4"),p=r("60a3"),d=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(u["a"])(r,[{key:"mounted",value:function(){var e=document.getElementById("QuestionsAdminConfig");if(e){var t=JSON.parse(e.innerHTML);t&&this.$store.dispatch("init",t)}}}]),r}(p["b"]);d=Object(l["a"])([Object(p["a"])({})],d);var f=d,h=f,b=r("2877"),v=Object(b["a"])(h,a,i,!1,null,null,null),y=v.exports,m=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ul",{staticClass:"menu vertical"},e._l(e.questionTypeGroups,(function(t,n){return r("li",{key:n},[r("router-link",{attrs:{to:"/question-type-groups/"+n},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.href,i=n.navigate;return[r("li",[r("a",{attrs:{href:a},on:{click:i}},[e._v(e._s(t.attributes.title))])])]}}],null,!0)})],1)})),0)])},k=[],x=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(u["a"])(r,[{key:"questionTypeGroups",get:function(){return this.$store.state.questionTypeGroups}}]),r}(p["b"]);x=Object(l["a"])([Object(p["a"])({})],x);var w=x,T=w,O=Object(b["a"])(T,g,k,!1,null,null,null),_=O.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[r("router-link",{attrs:{to:"/"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.href,a=t.navigate;return[r("a",{attrs:{href:n},on:{click:a}},[e._v("â† Back to all question sets")])]}}])})],1),e.questionTypeGroup?[r("h2",[e._v(e._s(e.questionTypeGroup.attributes.title))]),r("table",[e._m(0),r("tbody",e._l(e.questionTypes,(function(t,n){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.attributes._name))]),r("td",[e.editing.indexOf(n)<0?[e._v(" "+e._s(t.attributes.label)+" ")]:[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.label,expression:"questionType.attributes.label"}],attrs:{type:"text"},domProps:{value:t.attributes.label},on:{input:function(r){r.target.composing||e.$set(t.attributes,"label",r.target.value)}}})]],2),r("td",[r("div",{staticClass:"switch tiny"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes._enabled,expression:"questionType.attributes._enabled"}],staticClass:"switch-input",attrs:{id:"enabled-"+t.id,type:"checkbox"},domProps:{checked:Array.isArray(t.attributes._enabled)?e._i(t.attributes._enabled,null)>-1:t.attributes._enabled},on:{change:[function(r){var n=t.attributes._enabled,a=r.target,i=!!a.checked;if(Array.isArray(n)){var s=null,u=e._i(n,s);a.checked?u<0&&e.$set(t.attributes,"_enabled",n.concat([s])):u>-1&&e.$set(t.attributes,"_enabled",n.slice(0,u).concat(n.slice(u+1)))}else e.$set(t.attributes,"_enabled",i)},function(r){return e.updateQuestionType(t)}]}}),r("label",{staticClass:"switch-paddle",attrs:{for:"enabled-"+t.id}},[r("span",{staticClass:"show-for-sr"},[e._v("Question enabled?")]),r("span",{staticClass:"switch-active",attrs:{"aria-hidden":"true"}},[e._v("Yes")]),r("span",{staticClass:"switch-inactive",attrs:{"aria-hidden":"true"}},[e._v("No")])])])]),r("td",[r("aria-menubar",{scopedSlots:e._u([{key:"default",fn:function(a){var i=a.keyboardNav;return[r("ul",{staticClass:"menu",attrs:{role:"menubar"}},[e.editing.indexOf(n)<0?r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Edit"},on:{keyup:i,click:function(t){return e.toggleEditing(n)}}},[r("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])])]):[r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Save changes"},on:{keyup:i,click:function(r){e.updateQuestionType(t),e.toggleEditing(n)}}},[r("svg",{staticClass:"mdi icon success",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}})])])]),r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Cancel changes"},on:{keyup:i,click:function(r){e.resetQuestionType(t),e.toggleEditing(n)}}},[r("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])])])],n>0?r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Move Up"},on:{keyup:i,click:function(r){return e.moveQuestionType(t,-1)}}},[r("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])])]):r("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[r("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M15,20H9V12H4.16L12,4.16L19.84,12H15V20Z"}})])]),n<e.questionTypes.length-1?r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Move Down"},on:{keyup:i,click:function(r){return e.moveQuestionType(t,1)}}},[r("svg",{staticClass:"mdi icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])])]):r("li",{staticClass:"menu-text",attrs:{role:"presentation"}},[r("svg",{staticClass:"mdi icon secondary",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"}})])]),r("li",{attrs:{role:"presentation"}},[r("a",{attrs:{role:"menuitem",tabindex:"0","aria-label":"Delete"},on:{keyup:i,click:function(r){return e.deleteQuestionType(t)}}},[r("svg",{staticClass:"mdi icon alert",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])])],2)]}}],null,!0)})],1)])})),0)])]:e._e()],2)},q=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("th",{attrs:{scope:"col"}},[e._v("Identifier")]),r("th",{attrs:{scope:"col"}},[e._v("Label")]),r("th",{attrs:{scope:"col"}},[e._v("Show to the user")]),r("th",{attrs:{scope:"col"}},[e._v("Action")])])}],C=(r("4de4"),r("4160"),r("c975"),r("d81d"),r("a434"),r("159b"),r("96cf"),r("1da1")),L=r("4979"),Q=r.n(L),M=r("b85c"),A=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(u["a"])(r,[{key:"render",value:function(){if(this.$scopedSlots.default)return this.$scopedSlots.default({keyboardNav:this.keyboardNavigation,mouseClickNav:this.mouseClickNavigation})}},{key:"keyboardNavigation",value:function(e){var t=e.target;if(t)if(39===e.keyCode){var r=this.findNextMenuitem(this.getParentMenubar(t),t,"next");r&&r.focus()}else if(37===e.keyCode){var n=this.findNextMenuitem(this.getParentMenubar(t),t,"previous");n&&n.focus()}else if(38===e.keyCode||40===e.keyCode){if(t.parentElement&&t.parentElement.children){var a,i=Object(M["a"])(t.parentElement.children);try{for(i.s();!(a=i.n()).done;){var s=a.value;if("menu"===s.getAttribute("role")){s.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true");var u=this.findNextMenuitem(s,null,"next");u&&u.focus()}}}catch(d){i.e(d)}finally{i.f()}}}else if((13===e.keyCode||32==e.keyCode)&&t.parentElement&&t.parentElement.children){var o,c=Object(M["a"])(t.parentElement.children);try{for(c.s();!(o=c.n()).done;){var l=o.value;if("menu"===l.getAttribute("role"))if("false"===l.getAttribute("aria-hidden"))l.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false");else{l.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true");var p=this.findNextMenuitem(l,null,"next");if(p)return void p.focus()}}}catch(d){c.e(d)}finally{c.f()}t.click()}}},{key:"mouseClickNavigation",value:function(e){var t=e.target;if(t&&t.parentElement&&t.parentElement.children){var r,n=Object(M["a"])(t.parentElement.children);try{for(n.s();!(r=n.n()).done;){var a=r.value;if("menu"===a.getAttribute("role"))if("false"===a.getAttribute("aria-hidden"))a.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false");else{a.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true");var i=this.findNextMenuitem(a,null,"next");if(i)return void i.focus()}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"getParentMenubar",value:function(e){return e?"menubar"===e.getAttribute("role")?e:this.getParentMenubar(e.parentElement):null}},{key:"findNextMenuitem",value:function(e,t,r){if(!e)return null;var n=[];if("next"===r)for(var a=e.children.length-1;a>=0;a--)n.push(e.children[a]);else for(var i=0;i<e.children.length;i++)n.push(e.children[i]);var s=0;t||(s=1);while(n.length>0){var u=n.pop();if(0===s&&u===t)s=1;else if(1===s&&"menuitem"===u.getAttribute("role")&&"true"!==u.getAttribute("aria-disabled"))return u;if("menu"!==u.getAttribute("role"))if("next"===r)for(var o=u.children.length-1;o>=0;o--)n.push(u.children[o]);else for(var c=0;c<u.children.length;c++)n.push(u.children[c])}return null}}]),r}(p["b"]);A=Object(l["a"])([Object(p["a"])({})],A);var B,E,R=A,$=R,N=r("6d73");function H(e){this["$style"]=N["default"].locals||N["default"]}var P=Object(b["a"])($,B,E,!1,H,null,null),G=P.exports,S=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.editing=[],e}return Object(u["a"])(r,[{key:"moveQuestionType",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Q()(this.$store.state.questionTypeGroups[t.relationships["question-type-group"].data.id]),a=-1,n.relationships["question-types"].data.forEach((function(e,r){e.id===t.id&&(a=r)})),-1===a){e.next=9;break}return i=a+r,n.relationships["question-types"].data.splice(a,1),n.relationships["question-types"].data.splice(i,0,{type:"question-types",id:t.id}),e.next=9,this.$store.dispatch("updateQuestionTypeGroup",n);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateQuestionType",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("updateQuestionType",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toggleEditing",value:function(e){this.editing.indexOf(e)<0?this.editing.push(e):this.editing.splice(this.editing.indexOf(e),1)}},{key:"resetQuestionType",value:function(e){e.attributes._title=this.$store.state.questionTypes[e.id].attributes._title}},{key:"deleteQuestionType",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("deleteQuestionType",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),alert("This question type or a derived question type are in use and thus the question cannot be deleted");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"questionTypeGroup",get:function(){return this.$store.state.questionTypeGroups[this.$route.params["qtgid"]]}},{key:"questionTypes",get:function(){var e=this;return this.questionTypeGroup?this.questionTypeGroup.relationships["question-types"].data.map((function(t){return e.$store.state.questionTypes[t.id]?Q()(e.$store.state.questionTypes[t.id]):null})).filter((function(e){return e})):[]}}]),r}(p["b"]);S=Object(l["a"])([Object(p["a"])({components:{AriaMenubar:G}})],S);var V=S,Z=V,U=Object(b["a"])(Z,j,q,!1,null,null,null),F=U.exports;n["a"].use(m["a"]);var J=[{path:"/",name:"Root",component:_},{path:"/question-type-groups/:qtgid",name:"QuestionTypeGroup",component:F}],K=new m["a"]({routes:J}),X=K,D=(r("d3b7"),r("3ca3"),r("ddb0"),r("2f62")),I=r("bc3a"),Y=r.n(I);n["a"].use(D["a"]);var z=new D["a"].Store({state:{config:{api:{baseUrl:"",csrfToken:""}},questionTypeGroups:{},questionTypes:{},ui:{busy:!1,busyCounter:0}},mutations:{setConfig:function(e,t){e.config=t},setBusy:function(e,t){e.ui.busyCounter=t?e.ui.busyCounter+1:e.ui.busyCounter-1,e.ui.busy=e.ui.busyCounter>0},setQuestionTypeGroup:function(e,t){n["a"].set(e.questionTypeGroups,t.id,t)},setQuestionType:function(e,t){n["a"].set(e.questionTypes,t.id,t)},removeQuestionType:function(e,t){n["a"].delete(e.questionTypes,t.id)}},actions:{init:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a=e.dispatch,n("setConfig",t),a("loadQuestionTypes");case 3:case"end":return r.stop()}}),r)})))()},loadQuestionTypes:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.state,t.prev=1,t.delegateYield(regeneratorRuntime.mark((function e(){var t,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("setBusy",!0),e.next=3,Y.a.get(n.config.api.baseUrl+"/question_type_groups");case 3:for(t=e.sent,a=t.data.data,i=0;i<a.length;i++)s=a[i],r("setQuestionTypeGroup",s),s.relationships["question-types"].data.forEach(function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r("setBusy",!0),e.next=4,Y.a.get(n.config.api.baseUrl+"/question_types/"+a.id);case 4:t=e.sent,r("setQuestionType",t.data.data),r("setBusy",!1),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),r("setBusy",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());r("setBusy",!1);case 7:case"end":return e.stop()}}),e)}))(),"t0",3);case 3:t.next=8;break;case 5:t.prev=5,t.t1=t["catch"](1),r("setBusy",!1);case 8:case"end":return t.stop()}}),t,null,[[1,5]])})))()},updateQuestionTypeGroup:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.prev=1,n("setBusy",!0),r.next=5,Y()({method:"patch",url:a.config.api.baseUrl+"/question_type_groups/"+t.id,data:{data:t},headers:{"X-CSRF-TOKEN":a.config.api.csrfToken}});case 5:return i=r.sent,n("setQuestionTypeGroup",i.data.data),n("setBusy",!1),r.abrupt("return",Promise.resolve());case 11:return r.prev=11,r.t0=r["catch"](1),n("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},updateQuestionType:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.prev=1,n("setBusy",!0),r.next=5,Y()({method:"patch",url:a.config.api.baseUrl+"/question_types/"+t.id,data:{data:t},headers:{"X-CSRF-TOKEN":a.config.api.csrfToken}});case 5:return i=r.sent,n("setQuestionType",i.data.data),n("setBusy",!1),r.abrupt("return",Promise.resolve());case 11:return r.prev=11,r.t0=r["catch"](1),n("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},deleteQuestionType:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,i=e.dispatch,r.prev=1,n("setBusy",!0),r.next=5,Y()({method:"delete",url:a.config.api.baseUrl+"/question_types/"+t.id,headers:{"X-CSRF-TOKEN":a.config.api.csrfToken}});case 5:return n("removeQuestionType",t),i("loadQuestionTypes"),n("setBusy",!1),r.abrupt("return",Promise.resolve());case 11:return r.prev=11,r.t0=r["catch"](1),n("setBusy",!1),r.abrupt("return",Promise.reject(r.t0));case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()}},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:X,store:z,render:function(e){return e(y)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map